{
  "hash": "f90d9fd5d2b8737d3af07cd003767701",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: Consistentie in de datavisualisatie\nauthor: Harrie Jonkman\ndescription: |\n   Hoe maak je de datavisualisatie van een bepaalde organisatie consistentie waarbij je rekening houdt met het kleurgebruik en de typografie waarvoor is gekozen en waarbij je ook soms het logo kunt gebruiken. \ndate: \"2025-03-13\"\nlang: nl\ncategories: [Communiseren]\nimage: \"Screenshot1.PNG\"\nbibliography: litstijlgids.bib\n---\n\n\n\n# Introductie\n\nDe komende tijd zal ik enkele blogs schrijven over hoe je met *R* en *Quarto* wetenschappelijke producten een meer consistente uitstraling kunt geven. In dit blog gaat het over *Consistentie in de datavisualisatie*.\n\nMedia, onderzoeksinstellingen en overheden visualiseren data en informatie op allerlei manieren en gebruiken daarbij diverse programma's en technologieën. Over de eisen waaraan de visualisaties moeten voldoen, denken ze steeds meer na. Men is zich ervan bewust dat heldere uitgangspunten positief bijdragen aan toegankelijkheid, consistentie en effectiviteit van de resultaten. Steeds meer vooraanstaande media-, onderzoeks- en overheidsinstellingen publiceren daarom hun eigen stijlgidsen waarmee ze uitgangspunten van hun datavisualisatie formuleren (zie deze mooie voorbeelden: [@hiv/aids2021; @institute2024; @citistat2022; @b.b.c.2019].\n\nIn deze blogbijdrage worden allereerst kort enkele richtlijnen en principes voor datavisualisatie gepresenteerd. Die beschrijven wat algemeen en voor elke organisatie van belang is, ze geven houvast en bieden ruimte voor creativiteit. Het helpt bij het opzetten van een consistente wijze van werken door na te denken over typografie, kleur en de inzet van het logo.\n\nDaarna laat ik zien wat dit voor een organisatie betekent en het kan aansluiten bij werwijze.\n\n# Enkele richtlijnen en principes\n\n## Typografie\n\nDe kans is groot dat de organisatie al standaarden heeft voor het lettertype waarmee gewerkt wordt. Het lettertype voor datavisualisaties wordt daarop afgestemd, dat kan hetzelfde of een bijpassend lettertype zijn. Hou daarbij in ieder geval de volgende zaken in het achterhoofd:\n\n1.  *Leesbaarheid*. Focus op leesbaarheid. Zoek een lettertype dat gemakkelijk te lezen is en dat zowel hoofdletters als kleine letters ondersteunt. Weet zeker dat je met verschillende gewichten (vet, schuin, normaal, licht) kunt werken en ook dat je met de cijfers goed kunt werken.\n\n2.  *Toegankelijkheid*. Zorg ervoor dat iedereen toegang heeft tot het lettertype en ze het kunnen gebruiken.\n\n3.  *Afspraken*. Maak afspraken over tekstkleur en -groottes, ook voor de datavisualisatie. Dat kan kan globaal, maar de afspraken moeten wel te volgen zijn en vastgelegd zijn in de documentatie. Het moet wel werken in de verschillende media die gebruikt worden.\n\n## Kleur\n\nKleur is belangrijk bij datavisualisatie. Hier kom je vier kleurvormen tegen: hoofdkleur, categoriale kleuren, opeenvolgende kleuren en divergerende kleuren.\n\n*Hoofdkleur*: Kijk of de organisatie een bepaalde hoofdkleur (of bv. twee hoofdkleuren) heeft.\n\n*Categoriale kleuren*: Wanneer je kleur gebruikt om categorieën te maken, is het doel eenvoudig: groepen van elkaar onderscheiden. Je maakt enkele kleuren aan, bv. vier, vijf, of zes kleuren (kan meer, maar misschien niet te veel). Er zijn hier drie belangrijke doelen:\n\n1.  Kleuren zijn apart en verschillend.\n\n2.  Kleuren zijn waarde-neutraal.\n\n3.  Kleuren passen aan bij de organisatie. Bv. door de kleuren die al gebruikt worden of het logo.\n\n4.  De kleuren passen bij elkaar en vormen een geheel.\n\n*Divergerende kleuren*: Divergerende kleuren worden gebruikt om de afstand tussen (vaak) twee of drie groepen duidelijk te maken. De kleuren zijn afzonderlijk en verschillend en het verschil tussen de groepen is duidelijk.\n\n*Opeenvolgende kleuren*: Wanneer kleur wordt gebruikt om een numerieke waarde of hoeveelheid weer te geven, gebruik je een opeenvolgende kleurenschaal. Het eenvoudigste voorbeeld is iets dat aan de ene kant wit begint en aan de andere kant donkerder wordt tot het zwart is.\n\n1.  Schalen veranderen op een uniforme manier en dat betekent dat het verschil tussen 1 en 2 hetzelfde is als het verschil tussen 2 en 3.\n\n2.  Ook de opeeenvolgende kleuren passen aan bij de organisatie.\n\n3.  Ook hier vormt het palette een geheel.\n\n*Waar je verder op moet letten*: Naast de kleuren die gegevens coderen, moet je een meer neutrale set kleuren instellen voor achtergronden, tekst, assen en andere markeringen. Dit zijn vaak zwart- en grijstinten, maar ze kunnen getint worden om beter bij je merk te passen.\n\nAls je organisatie een merkgids of ontwerpsysteem heeft, overweeg dan manieren om deze te integreren (en aan te vullen) met richtlijnen voor datavisualisatie.\n\n## Logo\n\nZorg ervoor dat het logo (eventueel) kan worden gebruikt bij het maken van datavisualisatie. Het kleurgebruik past hier goed bij aan.\n\n# Praktijk\n\nIk heb contact opgenomen met Wim Bernasco van het NSCR met wie ik eerder voor enige tijd in een R-werkgroep zat waarvoor ikzelf de website gemaakt heb [nsc_R workgroup](https://nscrweb.netlify.app). Ik vroeg hem of er op zijn instituut afspraken zijn over typografie en het kleurgebruik. Dit stuurde hij mij per omgaande onder anderen op dat ik als uitgangspunt heb gebruikt:\n\n![Het kleurgebruik](NSCRkleuren.png)\n\nIk vroeg ook of hij mij het logo wilde sturen. Hij stuurde mij enkele opties toe en onderstaand logo heb ik steeds gebruikt:\n\n![Het logo](1a_NSCR_LogoBasis_RGB.jpg)\n\nOk, installeer en open allereerst de volgende pakketten:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nif(!require(pacman))install.packages(\"pacman\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nLoading required package: pacman\n```\n\n\n:::\n\n```{.r .cell-code}\npacman::p_load('ragg', 'systemfonts', 'textshaping','tidyverse', 'tidyr', 'gapminder',\n               'ggplot2',  'ggalt', 'monochromeR', 'cowplot', 'magick',\n               'forcats', 'R.utils', 'png', \n               'grid', 'ggpubr', 'scales')\n```\n:::\n\n\n\n## Eerst iets over typografie\n\nIk zie dat ze bij het NSCR met Calibri als font werken. Vervolgens heb ik gekeken of dit in mijn eigen fontbook staat. Dat was niet het geval en daarom heb ik het gedownload via google-fonts. Om met `R` te zien of het nu wel op mijn computer staat, kun je het volgende doen:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\nggplot(NULL, aes(0, 0)) +\n  geom_text(\n    aes(label = \"Calibri\"),\n    size = 18, family = \"Calibri\"\n  )\n```\n\n::: {.cell-output-display}\n![](fonts_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\n\nMaar wat heb ik van Calibri?\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsystem_fonts() %>% \n  filter(family == \"Calibri\") %>% \n  transmute(\n    family, style,\n    file = str_extract(path, \"[\\\\w-]+\\\\.ttf$\")\n  )\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 4 × 3\n  family  style       file       \n  <chr>   <chr>       <chr>      \n1 Calibri Bold Italic Italic.ttf \n2 Calibri Regular     Calibri.ttf\n3 Calibri Bold        Bold.ttf   \n4 Calibri Italic      Italic.ttf \n```\n\n\n:::\n:::\n\n\n\nOk, dit ziet er goed uit.\n\n## Kleur\n\nVervolgens heb ik gekeken naar de kleuren, dat zijn deze:\n\n![NSCR kleuren en lettertype](stijl/Huisstijl/NSCRkleuren.png)\n\nIk heb de NSCR-kleuren met hun RGB-codes in een RGB-Hex [converter](https://www.rgbtohex.net) gevonden\n\nDit is de hoofdkleur NSCR pink #B81E6 en de andere kleuren.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# NSCR hoofdkleur\nrgb_to_hex(c(184, 30, 97))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"#B81E61\"\n```\n\n\n:::\n\n```{.r .cell-code}\n## Andere kleuren\nrgb_to_hex(c(77, 114, 117))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"#4D7275\"\n```\n\n\n:::\n\n```{.r .cell-code}\nrgb_to_hex(c(254, 215, 157))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"#FED79D\"\n```\n\n\n:::\n\n```{.r .cell-code}\nrgb_to_hex(c(221, 90, 90))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"#DD5A5A\"\n```\n\n\n:::\n\n```{.r .cell-code}\nrgb_to_hex(c(123, 0, 56))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"#7B0038\"\n```\n\n\n:::\n\n```{.r .cell-code}\nrgb_to_hex(c(113, 143, 145))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"#718F91\"\n```\n\n\n:::\n\n```{.r .cell-code}\nrgb_to_hex(c(175, 50, 98))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"#AF3262\"\n```\n\n\n:::\n\n```{.r .cell-code}\n# Lettertype kleur\nrgb_to_hex(c(65, 65, 65))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"#414141\"\n```\n\n\n:::\n:::\n\n\n\nIk heb ook naar de gradients van de hoofdkleur #B81E61 gekeken en deze in de [app](https://cararthompson.shinyapps.io/monochromeR/) geplaatst. Dan krijg ik dit kleurenpalette:#B81E61 #C64A80 #D478A0 #E2A5BF #F0D2DF\n\nDit zijn de aanvullende NSCR-kleuren #4D7275, #FED79D, #DD5A5A, #7B0038, #718F91, #AF3262\n\nEn als ik het goed heb gebruiken ze deze kleur voor het font: #414141\n\nNu gaan we de algemene, opeenvolgende, divergerende, categoriale en tekstkleuren vastzetten.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Hoofdkleur\nNSCR_main <- c(\"#B81E61\")\n\n# Opeenvolgend\nNSCR_lighter <- c(\"#B81E61\", \"#C64A80\", \"#D478A0\", \"#E2A5BF\", \"#F0D2DF\")\n\n# divergerend\nNSCR_two <- c(\"#4D7275\", \"#FED79D\")\n\nNSCR_three <- c(\"#4D7275\", \"#FED79D\", \"#DD5A5A\")\n\n# Categoriaal\nNSCR_six <- c(\"#4D7275\", \"#FED79D\", \"#DD5A5A\", \"#7B0038\", \"#718F91\", \"#AF3262\")\n\n# Tekstkleur\nNSCR_font <- c(\"#414141\")\n```\n:::\n\n\n\nEens even kijken hoe de kleuren eruit zien.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmonochromeR::view_palette(NSCR_main)\n```\n\n::: {.cell-output-display}\n![](fonts_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n\n```{.r .cell-code}\nmonochromeR::view_palette(NSCR_lighter)\n```\n\n::: {.cell-output-display}\n![](fonts_files/figure-html/unnamed-chunk-6-2.png){width=672}\n:::\n\n```{.r .cell-code}\nmonochromeR::view_palette(NSCR_three)\n```\n\n::: {.cell-output-display}\n![](fonts_files/figure-html/unnamed-chunk-6-3.png){width=672}\n:::\n\n```{.r .cell-code}\nmonochromeR::view_palette(NSCR_six)\n```\n\n::: {.cell-output-display}\n![](fonts_files/figure-html/unnamed-chunk-6-4.png){width=672}\n:::\n\n```{.r .cell-code}\nmonochromeR::view_palette(NSCR_font)\n```\n\n::: {.cell-output-display}\n![](fonts_files/figure-html/unnamed-chunk-6-5.png){width=672}\n:::\n:::\n\n\n\n## Logo\n\nHet logo is duidelijk:\n\n![](logo/Logo's/NSCR/1a_NSCR_LogoBasis_RGB.jpg)\n\n## Basis grafiek met hoofdkleur\n\nVervolgens heb ik gekeken of ik een eenvoudige basisgrafiek zou kunnen maken. Hoe kunnen we daar de NSCR-kleuren, hun lettertype en logo aan toevoegen en, vooral, hoe kunnen we uiteindelijk dit proces automatiseren. Ik laat eerst de belangrijke stappen zien. Daar gebruik ik het bekende `gapminder` data-bestand voor en grafieken die de BBC ook met dat bestand hebben gemaakt [@b.b.c.2019].\n\n1.  *Eerst eenvoudige lijngrafiek met de kleur van het NSCR*\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#Data binnenhalen\ndf <- gapminder %>%\n  filter(country == \"Malawi\") \n\n#Grafiek maken\nplot <- ggplot(df, aes(x = year, y = lifeExp)) +\n  geom_line(colour = NSCR_main, size = 1) +\n  geom_hline(yintercept = 0, size = 1, colour=NSCR_font) +\n  labs(title=\"Langer leven\",\n       subtitle = \"Levensverwachting in Malawi 1952-2007\",\n        caption = 'Bron: Gapminder',\n       x = 'Jaar',\n       y = 'Levensverwachting') \n\nplot\n```\n\n::: {.cell-output-display}\n![](fonts_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n\n2.  *Tekstgrootte en rasterlijnen instellen*\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#Data binnenhalen\ndf <- gapminder %>%\n  filter(country == \"Malawi\") \n\n#MGrafiek maken\nplot <- ggplot(df, aes(x = year, y = lifeExp)) +\n  geom_line(colour = NSCR_main, size = 1) +\n  geom_hline(yintercept = 0, size = 1, colour=NSCR_font) +\n  labs(title=\"Langer leven\",\n       subtitle = \"Levensverwachting in Malawi 1952-2007\",\n        caption = 'Bron: Gapminder',\n       x = 'Jaar',\n       y = 'Levensverwachting') + \n  # centeer de kop en subkop en pas de grootte van de tekst aan\n  theme(plot.title = element_text(size = 20, hjust = 0.5), \n        plot.subtitle = element_text(size = 14, hjust = 0.5),\n        plot.caption = element_text(size = 8),\n        axis.title = element_text(size = 12)) +\n  # aanpassen rasterlijnen\n   theme(axis.line = element_line(color='black'),\n    plot.background = element_blank(),\n    panel.grid.minor = element_blank(),\n    panel.border = element_blank())\n\nplot\n```\n\n::: {.cell-output-display}\n![](fonts_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n\n3.  *Thema toevoegen voor consistentie*\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#Data binnenhalen\ndf <- gapminder %>%\n  filter(country == \"Malawi\") \n\n#Grafiek maken\nplot <- ggplot(df, aes(x = year, y = lifeExp)) +\n  theme_minimal() +\n  geom_line(colour = NSCR_main, size = 1) +\n  geom_hline(yintercept = 0, size = 1, colour=NSCR_font) +\n  labs(title=\"Langer leven\",\n       subtitle = \"Levensverwachting in Malawi 1952-2007\",\n        caption = 'Bron: Gapminder',\n       x = 'Jaar',\n       y = 'Levensverwachting') + \n  # centeer de kop en subkop en pas de grootte van de tekst aan\n  theme(plot.title = element_text(size = 20, hjust = 0.5), \n        plot.subtitle = element_text(size = 14, hjust = 0.5),\n        plot.caption = element_text(size = 8),\n        axis.title = element_text(size = 12),\n        axis.text = element_text(size = 8)) +\n  # aanpassen rasterlijne\n   theme(axis.line = element_line(color='black'),\n    plot.background = element_blank(),\n    panel.grid.minor = element_blank(),\n    panel.border = element_blank())\n\nplot\n```\n\n::: {.cell-output-display}\n![](fonts_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\n\n4.  *Lettertype Calibri toevoegen*\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#Data for chart from gapminder package\ndf <- gapminder %>%\n  filter(country == \"Malawi\") \n\n#Make plot\nplot <- ggplot(df, aes(x = year, y = lifeExp)) +\n  theme_minimal() +\n  geom_line(colour = NSCR_main, size = 1) +\n  geom_hline(yintercept = 0, size = 1, colour=NSCR_font) +\n  labs(title=\"Langer leven\",\n       subtitle = \"Levensverwachting in Malawi 1952-2007\",\n        caption = 'Bron: Gapminder',\n       x = 'Jaar',\n       y = 'Levensverwachting') + \n        # plaats de titels, de titels op de assen en titels van de legenda in dezelfde kleur. \n  theme(plot.title = element_text(size = 20, hjust = 0.5), \n        plot.subtitle = element_text(size = 14, hjust = 0.5),\n        plot.caption = element_text(size = 8),\n        axis.title = element_text(size = 12),\n        axis.text = element_text(size = 8, color = NSCR_font),\n # tekst elementen naar Calibri zetten. \n        text = element_text(family = \"Calibri\")) +\n  # aanpassen rasterlijnen\n   theme(axis.line = element_line(color='black'),\n    plot.background = element_blank(),\n    panel.grid.minor = element_blank(),\n    panel.border = element_blank())\n\nplot\n```\n\n::: {.cell-output-display}\n![](fonts_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\n\n5.  *Nu het logo toevoegen*\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(cowplot)\nlibrary(magick)\n\n# Logo lokaal opslaan\nnscr_logo <- image_read('1a_NSCR_LogoBasis_RGB.jpg')\n\n#Data binnenhalen\ndf <- gapminder %>%\n  filter(country == \"Malawi\") \n\n#Grafiek maken\nplot <- ggplot(df, aes(x = year, y = lifeExp)) +\n  theme_minimal() +\n  geom_line(colour = NSCR_main, size = 1) +\n  geom_hline(yintercept = 0, size = 1, colour=NSCR_font) +\n  labs(title=\"Langer leven\",\n       subtitle = \"Levensverwachting in Malawi 1952-2007\",\n        caption = 'Bron: Gapminder',\n       x = 'Jaar',\n       y = 'Levensverwachting') + \n        # plaats de titels, de titels op de assen en titels van de legenda in dezelfde kleur. \n  theme(plot.title = element_text(size = 20, hjust = 0.5), \n        plot.subtitle = element_text(size = 14, hjust = 0.5),\n        plot.caption = element_text(size = 8),\n        axis.title = element_text(size = 12),\n        axis.text = element_text(size = 8, color = NSCR_font),\n # tekst elementen naar Calibri zetten. \n        text = element_text(family = \"Calibri\")) +\n  # aanpassen rasterlijnen\n   theme(axis.line = element_line(color='black'),\n    plot.background = element_blank(),\n    panel.grid.minor = element_blank(),\n    panel.border = element_blank())\n\n\nline_plot<- ggdraw() +\n  # specificeer positie logo \n  draw_image(nscr_logo, x = -0.375, y = 0.45 , scale = 0.2) +   \n  draw_plot(plot)\n\nline_plot\n```\n\n::: {.cell-output-display}\n![](fonts_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\n\n6a. *Automatiseren met logo*\n\nIn een apart bestand definieer je de eisen waaraan de visualisatie moet voldoen. Dan hoef je die eisen niet steeds opnieuw aan de programmering toe te voegen en kan iedereen deze gebruiken. Dat staat in het document `nscr.R` en we noemen het `theme_nscr`. Als je het logo wilt gebruiken moet je dat toevoegen.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsource('nscr.R')\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nLoading required package: sysfonts\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nLoading required package: showtextdb\n```\n\n\n:::\n\n```{.r .cell-code}\n#Data binnenhalen\ndf <- gapminder %>%\n  filter(country == \"Malawi\") \n\n#Grafiek maken\nplot <- ggplot(df, aes(x = year, y = lifeExp)) +\n  geom_line(colour = NSCR_main, size = 1) +\n  geom_hline(yintercept = 0, size = 1, colour=NSCR_font) +\n  labs(title=\"Langer leven\",\n       subtitle = \"Levensverwachting in Malawi 1952-2007\",\n        caption = 'Bron: Gapminder',\n       x = 'Jaar',\n       y = 'Levensverwachting') +\ntheme_nscr\n \n# logo toevoegen\nline_plot <- ggdraw() +\n  # these specify the position on the graph\n  draw_image(nscr_logo, x = -0.375, y = 0.45 , scale = 0.2) +   \n  draw_plot(plot)\n\nline_plot \n```\n\n::: {.cell-output-display}\n![](fonts_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n\n\n6b. Automatiseren zonder logo Alles hetzelfde als hierboven maar nu zonder logo.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsource('nscr.R')\n\n#Data binnenhalen\ndf <- gapminder %>%\n  filter(country == \"Malawi\") \n\n#Grafiek maken\nplot <- ggplot(df, aes(x = year, y = lifeExp)) +\n  geom_line(colour = NSCR_main, size = 1) +\n  geom_hline(yintercept = 0, size = 1, colour=NSCR_font) +\n  labs(title=\"Langer leven\",\n       subtitle = \"Levensverwachting in Malawi 1952-2007\",\n        caption = 'Bron: Gapminder',\n       x = 'Jaar',\n       y = 'Levensverwachting') +\ntheme_nscr\n \nplot\n```\n\n::: {.cell-output-display}\n![](fonts_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\n\n\n# Met hoofdkleur\n\nVervolgens heb ik vanuit deze opzet nog enkele andere visualisaties gemaakt. Eerst nog enkele visualisaties met alleen de hoofdkleur.\n\n## Staafdiagram (met logo)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Bestand activeren\nsource('nscr.R')\n\n# Data voorbereiden\ndf <- gapminder %>%\n  filter(year == 2007 & continent == \"Africa\") %>%\n  arrange(desc(lifeExp)) %>%\n  head(5)\n\n# Make plot\nplot <- ggplot(df, aes(x = country, y = lifeExp)) +\n  geom_bar(stat=\"identity\", \n           position=\"identity\", \n           fill=NSCR_main) +\n  geom_hline(yintercept = 0, size = 1, colour=NSCR_font) +\n  labs(title=\"Reunion is het hoogste\",\n       subtitle = \"Hoogste Afrikaanse levensverwachting, 2007\",\n       caption = 'Bron: Gapminder') + \n  theme_nscr\n\nbars_plot <- ggdraw() +\n  # specificeer de positie van de grafiek\n  draw_image(nscr_logo, x = -0.375, y = 0.45 , scale = 0.2) +   \n  draw_plot(plot)\n\nbars_plot \n```\n\n::: {.cell-output-display}\n![](fonts_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n\n\n## Of omgedraaid (zonder logo)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsource('nscr.R')\n\n# Data voorbereiden\ndf <- gapminder %>%\n  filter(year == 2007 & continent == \"Africa\") %>%\n  arrange(desc(lifeExp)) %>%\n  head(5)\n\n# Grafiek maken\nplot <- ggplot(df, aes(x = country, y = lifeExp)) +\n  geom_bar(stat=\"identity\", \n           position=\"identity\", \n           fill=NSCR_main) +\n  geom_hline(yintercept = 0, size = 1, colour=NSCR_font) +\n  labs(title=\"Reunion is highest\",\n       subtitle = \"Highest African life expectancy, 2007\",\n       caption = 'Bron: Gapminder') + \n  theme_nscr\n\nbars_flipped<-plot + coord_flip()\n\nbars_flipped\n```\n\n::: {.cell-output-display}\n![](fonts_files/figure-html/unnamed-chunk-15-1.png){width=672}\n:::\n:::\n\n\n\n## Histogram (zonder logo)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Bestand activeren\nsource('nscr.R')\n\n# Data voorbereiden\ndf <- gapminder %>%\n  filter(year == 2007)\n\n# Grafiek maken\nplot<-ggplot(df, aes(lifeExp)) +\n  geom_histogram(binwidth = 5, colour = \"white\", fill = NSCR_main) +\n  geom_hline(yintercept = 0, size = 1, colour=NSCR_font) +\n  scale_x_continuous(limits = c(35, 95),\n                     breaks = seq(40, 90, by = 10),\n                     labels = c(\"40\", \"50\", \"60\", \"70\", \"80\", \"90 years\")) +\n  labs(title = \"Hoe de levensverwachting varieert\",\n       subtitle = \"Verdeling van levensverwachting in 2007\",\n       caption = 'Bron: Gapminder') +\n  theme_nscr\n\n\nplot\n```\n\n::: {.cell-output-display}\n![](fonts_files/figure-html/unnamed-chunk-16-1.png){width=672}\n:::\n:::\n\n\n\n# Categoriale kleuren\n\nVervolgens gebruiken we ook de andere kleuren van het NSCR, eerst de categoriale kleuren.\n\n## Twee groepen vergelijken (zonder logo)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Bron activeren\nsource('nscr.R')\n\n# Data bewerken\ndf <- gapminder %>%\n  filter(country == \"China\" | country == \"United States\") \n\n# Grafiek maken\nplot <- ggplot(df, aes(x = year, y = lifeExp, colour = country)) +\n  geom_line(size = 1) +\n  geom_hline(yintercept = 0, size = 1, colour=NSCR_font) +\n  scale_colour_manual(values = NSCR_two) +\n  labs(title=\"Living longer\",\n       subtitle = \"Life expectancy in China and the US\",\n       caption = 'Bron: Gapminder') +\n theme_nscr\n\nplot\n```\n\n::: {.cell-output-display}\n![](fonts_files/figure-html/unnamed-chunk-17-1.png){width=672}\n:::\n:::\n\n\n\n## Een gegroepeerde staafdiagram (zonder logo)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Bestand activeren\nsource('nscr.R')\n\n#Data voorbereiden\ndf <- gapminder %>%\n  filter(year == 1967 | year == 2007) %>%\n  select(country, year, lifeExp) %>%\n  spread(year, lifeExp) %>%\n  mutate(gap = `2007` - `1967`) %>%\n  arrange(desc(gap)) %>%\n  head(5) %>%\n  gather(key = year, \n         value = lifeExp,\n         -country,\n         -gap) \n  \n#Grafiek maken\nplot <- ggplot(df, \n               aes(x = country, \n               y = lifeExp, \n               fill = as.factor(year))) +\n  geom_bar(stat=\"identity\", position=\"dodge\") +\n  geom_hline(yintercept = 0, size = 1, colour=NSCR_font) +\n  scale_fill_manual(values = NSCR_two) +\n  labs(title=\"We're living longer\",\n       subtitle = \"Biggest life expectancy rise, 1967-2007\",\n       caption = 'Bron: Gapminder') + \n  theme_nscr\n\nplot\n```\n\n::: {.cell-output-display}\n![](fonts_files/figure-html/unnamed-chunk-18-1.png){width=672}\n:::\n:::\n\n\n\n## Groepen vergelijken (met logo)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Bestand activeren\nsource('nscr.R')\n\n# Deze pakketten activeren (moeten wel zijn geïnstalleerd)\nlibrary(\"ggalt\")\nlibrary(\"tidyr\")\n\n#Data voorbereiden\ndf <- gapminder %>%\n  filter(year == 1967 | year == 2007) %>%\n  select(country, year, lifeExp) %>%\n  spread(year, lifeExp) %>%\n  mutate(gap = `2007` - `1967`) %>%\n  arrange(desc(gap)) %>%\n  head(10)\n\n#Grafiek maken\nplot<-ggplot(df, aes(x = `1967`, xend = `2007`, y = reorder(country, gap), group = country)) + \n  geom_dumbbell(colour = \"#dddddd\",\n                size = 3,\n                colour_x = \"#4D7275\",\n                colour_xend = \"#FED79D\") +\n  labs(title=\"Wij leven langer\",\n       subtitle=\"Stijging levensverwachting, 1967-2007\",\n       caption = 'Bron: Gapminder') +\n  theme_nscr\n\ngroepen_plot <- ggdraw() +\n  # logo toevoegen en positie bepalen\n  draw_image(nscr_logo, x = -0.375, y = 0.45 , scale = 0.2) +   \n  draw_plot(plot)\n\ngroepen_plot\n```\n\n::: {.cell-output-display}\n![](fonts_files/figure-html/unnamed-chunk-19-1.png){width=672}\n:::\n:::\n\n\n\n# Divergerende kleuren\n\nNu enkele grafieken met divergerende kleuren.\n\n## Facetten (zonder logo)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Bestand activeren\nsource('nscr.R')\n\n# Data voorbereiden\ndf <- gapminder %>%\n  filter(continent != \"Americas\") %>%\n  group_by(continent, year) %>%\n  summarise(pop = sum(as.numeric(pop)))\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`summarise()` has grouped output by 'continent'. You can override using the\n`.groups` argument.\n```\n\n\n:::\n\n```{.r .cell-code}\n# Grafiek maken\nplot<- ggplot() +\n  geom_area(data=df, aes(x = year, y = pop, fill = continent)) +\n  scale_fill_manual(values = NSCR_six) + \n  facet_wrap( ~ continent, ncol = 5) + \n  scale_y_continuous(breaks = c(0, 2000000000, 4000000000),\n                     labels = c(0, \"2bn\", \"4bn\")) +\n  geom_hline(yintercept = 0, size = 1, colour = NSCR_font) +\n  theme(legend.position = \"none\",\n        axis.text.x = element_blank()) +\n  scale_x_discrete(guide=  guide_axis(angle = 90)) +\n  labs(title = \"Asië's snelle groei\",\n       subtitle = \"Groei van de bevolking per continent, 1952-2007\",\n       caption = 'Bron:Gapminder') +\n  theme_nscr\n\nplot\n```\n\n::: {.cell-output-display}\n![](fonts_files/figure-html/unnamed-chunk-20-1.png){width=672}\n:::\n:::\n\n\n\n# Opeenvolgende kleuren\n\nNu een grafiek met de paarse opeenvolgende NSCR-kleuren\n\n## Kaarten (met logo)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Dateaset voorbereiden\ndata(gapminder, package = \"gapminder\")\nplot<- gapminder %>%\n  filter(year == 2007) %>%\n  rename(region = country,\n         value = lifeExp) %>%\n  mutate(region = tolower(region)) %>%\n  mutate(region = \n    recode(region,\n          \"united states\"    = \"united states of america\",\n          \"congo, dem. rep.\" = \"democratic republic of the congo\",\n          \"congo, rep.\"      = \"republic of congo\",\n          \"korea, dem. rep.\" = \"south korea\",\n          \"korea. rep.\"      = \"north korea\",\n          \"tanzania\"         = \"united republic of tanzania\",\n          \"serbia\"           = \"republic of serbia\",\n          \"slovak republic\"  = \"slovakia\",\n          \"yemen, rep.\"      = \"yemen\"))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Bestand activeren\nsource('nscr.R')\n\n# pakketten activeren (moeten wel zijn geïnstalleerd)\nlibrary(choroplethr)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nLoading required package: acs\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nLoading required package: XML\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'acs'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following object is masked from 'package:dplyr':\n\n    combine\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following object is masked from 'package:base':\n\n    apply\n```\n\n\n:::\n\n```{.r .cell-code}\ncountry_choropleth(plot)\n```\n\n::: {.cell-output-display}\n![](fonts_files/figure-html/unnamed-chunk-22-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# Grafiek maken\nmap<-country_choropleth(plot,\n                   num_colors=4) +\n  labs(title = \"Life expectancy by country\",\n       subtitle = \"Gapminder 2007 data\",\n       caption = \"source: https://www.gapminder.org\",\n       fill = \"Years\") +\n   scale_fill_manual(values = NSCR_lighter) +\n\ntheme_nscr\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nScale for fill is already present.\nAdding another scale for fill, which will replace the existing scale.\n```\n\n\n:::\n\n```{.r .cell-code}\n# logo toevoegen en positioneren\nmap_2 <- ggdraw() +\n  draw_image(nscr_logo, x = -0.375, y = 0.45 , scale = 0.2) +   \n  draw_plot(map)\n\nmap_2\n```\n\n::: {.cell-output-display}\n![](fonts_files/figure-html/unnamed-chunk-22-2.png){width=672}\n:::\n:::\n",
    "supporting": [
      "fonts_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}