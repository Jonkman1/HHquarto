<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

  <!--radix_placeholder_meta_tags-->
  <title>Survival analyse met R</title>
  
  <meta property="description" itemprop="description" content="Dit is een deel van een tutorial die Emily Zabore schreef over survival analyse met R."/>
  
  
  <!--  https://schema.org/Article -->
  <meta property="article:published" itemprop="datePublished" content="2020-08-21"/>
  <meta property="article:created" itemprop="dateCreated" content="2020-08-21"/>
  <meta name="article:author" content="Emily Zabore, bewerking Harrie Jonkman"/>
  
  <!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
  <meta property="og:title" content="Survival analyse met R"/>
  <meta property="og:type" content="article"/>
  <meta property="og:description" content="Dit is een deel van een tutorial die Emily Zabore schreef over survival analyse met R."/>
  <meta property="og:locale" content="en_US"/>
  
  <!--  https://dev.twitter.com/cards/types/summary -->
  <meta property="twitter:card" content="summary"/>
  <meta property="twitter:title" content="Survival analyse met R"/>
  <meta property="twitter:description" content="Dit is een deel van een tutorial die Emily Zabore schreef over survival analyse met R."/>
  
  <!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-rmarkdown-metadata">
  {"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","author","date","output"]}},"value":[{"type":"character","attributes":{},"value":["Survival analyse met R"]},{"type":"character","attributes":{},"value":["Dit is een deel van een tutorial die Emily Zabore schreef over survival analyse met R.\n"]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","url"]}},"value":[{"type":"character","attributes":{},"value":["Emily Zabore, bewerking Harrie Jonkman"]},{"type":"character","attributes":{},"value":["www.harriejonkman.nl"]}]}]},{"type":"character","attributes":{},"value":["08-21-2020"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained"]}},"value":[{"type":"logical","attributes":{},"value":[false]}]}]}]}
  </script>
  <!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["img/blogdirectory.png","img/blogfolders.png","img/build.png","img/cname1.png","img/cname2.png","img/directory.png","img/domain.png","img/ghpages.png","img/ghsource.png","img/index.png","img/musician_death_graph.jpg","img/newpost.png","img/newpostbox.png","img/newpostboxfilled.png","img/nojekyll.png","img/package.png","img/personal.png","img/project.png","img/publishdir.png","img/rladiesnychome.png","img/rstudiogit.png","img/servesite.png","img/Thumbs.db","img/trial_anatomy.png","img/upload.png","img/uploadbutton.png","img/yml.png","survival-analyse-met-r_files/bowser-1.9.3/bowser.min.js","survival-analyse-met-r_files/distill-2.2.21/template.v2.js","survival-analyse-met-r_files/figure-html5/fuptimes-1.png","survival-analyse-met-r_files/figure-html5/swimmer-1.png","survival-analyse-met-r_files/figure-html5/unnamed-chunk-10-1.png","survival-analyse-met-r_files/figure-html5/unnamed-chunk-17-1.png","survival-analyse-met-r_files/figure-html5/unnamed-chunk-2-1.png","survival-analyse-met-r_files/figure-html5/unnamed-chunk-21-1.png","survival-analyse-met-r_files/figure-html5/unnamed-chunk-3-1.png","survival-analyse-met-r_files/figure-html5/unnamed-chunk-32-1.png","survival-analyse-met-r_files/figure-html5/unnamed-chunk-33-1.png","survival-analyse-met-r_files/figure-html5/unnamed-chunk-35-1.png","survival-analyse-met-r_files/figure-html5/unnamed-chunk-36-1.png","survival-analyse-met-r_files/figure-html5/unnamed-chunk-37-1.png","survival-analyse-met-r_files/figure-html5/unnamed-chunk-38-1.png","survival-analyse-met-r_files/figure-html5/unnamed-chunk-4-1.png","survival-analyse-met-r_files/figure-html5/unnamed-chunk-5-1.png","survival-analyse-met-r_files/figure-html5/unnamed-chunk-6-1.png","survival-analyse-met-r_files/figure-html5/unnamed-chunk-8-1.png","survival-analyse-met-r_files/jquery-1.11.3/jquery.min.js","survival-analyse-met-r_files/webcomponents-2.0.0/webcomponents.js"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
  <!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->
  
  <style type="text/css">
  
  body {
    background-color: white;
  }
  
  .pandoc-table {
    width: 100%;
  }
  
  .pandoc-table>caption {
    margin-bottom: 10px;
  }
  
  .pandoc-table th:not([align]) {
    text-align: left;
  }
  
  .pagedtable-footer {
    font-size: 15px;
  }
  
  .html-widget {
    margin-bottom: 2.0em;
  }
  
  .l-screen-inset {
    padding-right: 16px;
  }
  
  .l-screen .caption {
    margin-left: 10px;
  }
  
  .shaded {
    background: rgb(247, 247, 247);
    padding-top: 20px;
    padding-bottom: 20px;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }
  
  .shaded .html-widget {
    margin-bottom: 0;
    border: 1px solid rgba(0, 0, 0, 0.1);
  }
  
  .shaded .shaded-content {
    background: white;
  }
  
  .text-output {
    margin-top: 0;
    line-height: 1.5em;
  }
  
  .hidden {
    display: none !important;
  }
  
  d-article {
    padding-bottom: 30px;
  }
  
  d-appendix {
    padding-top: 30px;
  }
  
  d-article>p>img {
    width: 100%;
  }
  
  d-article iframe {
    border: 1px solid rgba(0, 0, 0, 0.1);
    margin-bottom: 2.0em;
    width: 100%;
  }
  
  figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }
  
  /* CSS for table of contents */
  
  .d-toc {
    color: rgba(0,0,0,0.8);
    font-size: 0.8em;
    line-height: 1em;
  }
  
  .d-toc-header {
    font-size: 0.6rem;
    font-weight: 400;
    color: rgba(0, 0, 0, 0.5);
    text-transform: uppercase;
    margin-top: 0;
    margin-bottom: 1.3em;
  }
  
  .d-toc a {
    border-bottom: none;
  }
  
  .d-toc ul {
    padding-left: 0;
  }
  
  .d-toc li>ul {
    padding-top: 0.8em;
    padding-left: 16px;
    margin-bottom: 0.6em;
  }
  
  .d-toc ul,
  .d-toc li {
    list-style-type: none;
  }
  
  .d-toc li {
    margin-bottom: 0.9em;
  }
  
  .d-toc-separator {
    margin-top: 20px;
    margin-bottom: 2em;
  }
  
  .d-article-with-toc {
    border-top: none;
    padding-top: 0;
  }
  
  
  
  /* Tweak code blocks (note that this CSS is repeated above in an injection
     into the d-code shadow dom) */
  
  d-code {
    overflow-x: auto !important;
  }
  
  pre.d-code code.d-code {
    padding-left: 10px;
    font-size: 12px;
    border-left: 2px solid rgba(0,0,0,0.1);
  }
  
  pre.text-output {
  
    font-size: 12px;
    color: black;
    background: none;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;
  
    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;
  
    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }
  
  @media(min-width: 768px) {
  
  d-code {
    overflow-x: visible !important;
  }
  
  pre.d-code code.d-code  {
      padding-left: 18px;
      font-size: 14px;
  }
  pre.text-output {
    font-size: 14px;
  }
  }
  
  /* Figure */
  
  .figure {
    position: relative;
    margin-bottom: 2.5em;
    margin-top: 1.5em;
  }
  
  .figure img {
    width: 100%;
  }
  
  .figure .caption {
    color: rgba(0, 0, 0, 0.6);
    font-size: 12px;
    line-height: 1.5em;
  }
  
  .figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }
  
  .figure .caption a {
    color: rgba(0, 0, 0, 0.6);
  }
  
  .figure .caption b,
  .figure .caption strong, {
    font-weight: 600;
    color: rgba(0, 0, 0, 1.0);
  }
  
  
  
  /* Tweak 1000px media break to show more text */
  
  @media(min-width: 1000px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 16px;
    }
  
    .grid {
      grid-column-gap: 16px;
    }
  
    d-article {
      font-size: 1.06rem;
      line-height: 1.7em;
    }
    figure .caption, .figure .caption, figure figcaption {
      font-size: 13px;
    }
  }
  
  @media(min-width: 1180px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 32px;
    }
  
    .grid {
      grid-column-gap: 32px;
    }
  }
  
  
  /* Get the citation styles for the appendix (not auto-injected on render since
     we do our own rendering of the citation appendix) */
  
  d-appendix .citation-appendix,
  .d-appendix .citation-appendix {
    font-size: 11px;
    line-height: 15px;
    border-left: 1px solid rgba(0, 0, 0, 0.1);
    padding-left: 18px;
    border: 1px solid rgba(0,0,0,0.1);
    background: rgba(0, 0, 0, 0.02);
    padding: 10px 18px;
    border-radius: 3px;
    color: rgba(150, 150, 150, 1);
    overflow: hidden;
    margin-top: -12px;
    white-space: pre-wrap;
    word-wrap: break-word;
  }
  
  
  /* Social footer */
  
  .social_footer {
    margin-top: 30px;
    margin-bottom: 0;
    color: rgba(0,0,0,0.67);
  }
  
  .disqus-comments {
    margin-right: 30px;
  }
  
  .disqus-comment-count {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
    cursor: pointer;
  }
  
  #disqus_thread {
    margin-top: 30px;
  }
  
  .article-sharing a {
    border-bottom: none;
    margin-right: 8px;
  }
  
  .article-sharing a:hover {
    border-bottom: none;
  }
  
  .sidebar-section.subscribe {
    font-size: 12px;
    line-height: 1.6em;
  }
  
  .subscribe p {
    margin-bottom: 0.5em;
  }
  
  
  .article-footer .subscribe {
    font-size: 15px;
    margin-top: 45px;
  }
  
  
  /* Improve display for browsers without grid (IE/Edge <= 15) */
  
  .downlevel {
    line-height: 1.6em;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
    margin: 0;
  }
  
  .downlevel .d-title {
    padding-top: 6rem;
    padding-bottom: 1.5rem;
  }
  
  .downlevel .d-title h1 {
    font-size: 50px;
    font-weight: 700;
    line-height: 1.1em;
    margin: 0 0 0.5rem;
  }
  
  .downlevel .d-title p {
    font-weight: 300;
    font-size: 1.2rem;
    line-height: 1.55em;
    margin-top: 0;
  }
  
  .downlevel .d-byline {
    padding-top: 0.8em;
    padding-bottom: 0.8em;
    font-size: 0.8rem;
    line-height: 1.8em;
  }
  
  .downlevel .section-separator {
    border: none;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }
  
  .downlevel .d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
    padding-top: 1rem;
    padding-bottom: 2rem;
  }
  
  
  .downlevel .d-appendix {
    padding-left: 0;
    padding-right: 0;
    max-width: none;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.5);
    padding-top: 40px;
    padding-bottom: 48px;
  }
  
  .downlevel .footnotes ol {
    padding-left: 13px;
  }
  
  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
    padding-left: 40px;
    padding-right: 40px;
  }
  
  @media(min-width: 768px) {
    .downlevel .base-grid,
    .downlevel .distill-header,
    .downlevel .d-title,
    .downlevel .d-abstract,
    .downlevel .d-article,
    .downlevel .d-appendix,
    .downlevel .distill-appendix,
    .downlevel .d-byline,
    .downlevel .d-footnote-list,
    .downlevel .d-citation-list,
    .downlevel .distill-footer,
    .downlevel .appendix-bottom,
    .downlevel .posts-container {
    padding-left: 150px;
    padding-right: 150px;
    max-width: 900px;
  }
  }
  
  .downlevel pre code {
    display: block;
    border-left: 2px solid rgba(0, 0, 0, .1);
    padding: 0 0 0 20px;
    font-size: 14px;
  }
  
  .downlevel code, .downlevel pre {
    color: black;
    background: none;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;
  
    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;
  
    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }
  
  </style>
  
  <script type="application/javascript">
  
  function is_downlevel_browser() {
    if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                   window.navigator.userAgent)) {
      return true;
    } else {
      return window.load_distill_framework === undefined;
    }
  }
  
  // show body when load is complete
  function on_load_complete() {
  
    // set body to visible
    document.body.style.visibility = 'visible';
  
    // force redraw for leaflet widgets
    if (window.HTMLWidgets) {
      var maps = window.HTMLWidgets.findAll(".leaflet");
      $.each(maps, function(i, el) {
        var map = this.getMap();
        map.invalidateSize();
        map.eachLayer(function(layer) {
          if (layer instanceof L.TileLayer)
            layer.redraw();
        });
      });
    }
  
    // trigger 'shown' so htmlwidgets resize
    $('d-article').trigger('shown');
  }
  
  function init_distill() {
  
    init_common();
  
    // create front matter
    var front_matter = $('<d-front-matter></d-front-matter>');
    $('#distill-front-matter').wrap(front_matter);
  
    // create d-title
    $('.d-title').changeElementType('d-title');
  
    // create d-byline
    var byline = $('<d-byline></d-byline>');
    $('.d-byline').replaceWith(byline);
  
    // create d-article
    var article = $('<d-article></d-article>');
    $('.d-article').wrap(article).children().unwrap();
  
    // move posts container into article
    $('.posts-container').appendTo($('d-article'));
  
    // create d-appendix
    $('.d-appendix').changeElementType('d-appendix');
  
    // create d-bibliography
    var bibliography = $('<d-bibliography></d-bibliography>');
    $('#distill-bibliography').wrap(bibliography);
  
    // flag indicating that we have appendix items
    var appendix = $('.appendix-bottom').children('h3').length > 0;
  
    // replace citations with <d-cite>
    $('.citation').each(function(i, val) {
      appendix = true;
      var cites = $(this).attr('data-cites').split(" ");
      var dt_cite = $('<d-cite></d-cite>');
      dt_cite.attr('key', cites.join());
      $(this).replaceWith(dt_cite);
    });
    // remove refs
    $('#refs').remove();
  
    // replace footnotes with <d-footnote>
    $('.footnote-ref').each(function(i, val) {
      appendix = true;
      var href = $(this).attr('href');
      var id = href.replace('#', '');
      var fn = $('#' + id);
      var fn_p = $('#' + id + '>p');
      fn_p.find('.footnote-back').remove();
      var text = fn_p.html();
      var dtfn = $('<d-footnote></d-footnote>');
      dtfn.html(text);
      $(this).replaceWith(dtfn);
    });
    // remove footnotes
    $('.footnotes').remove();
  
    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      var id = $(this).attr('id');
      $('.d-toc a[href="#' + id + '"]').parent().remove();
      appendix = true;
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
    });
  
    // show d-appendix if we have appendix content
    $("d-appendix").css('display', appendix ? 'grid' : 'none');
  
    // replace code blocks with d-code
    $('pre>code').each(function(i, val) {
      var code = $(this);
      var pre = code.parent();
      var clz = "";
      var language = pre.attr('class');
      if (language) {
        // map unknown languages to "clike" (without this they just dissapear)
        if ($.inArray(language, ["bash", "clike", "css", "go", "html",
                                 "javascript", "js", "julia", "lua", "markdown",
                                 "markup", "mathml", "python", "svg", "xml"]) == -1)
          language = "clike";
        language = ' language="' + language + '"';
        var dt_code = $('<d-code block' + language + clz + '></d-code>');
        dt_code.text(code.text());
        pre.replaceWith(dt_code);
      } else {
        code.addClass('text-output').unwrap().changeElementType('pre');
      }
    });
  
    // localize layout chunks to just output
    $('.layout-chunk').each(function(i, val) {
  
      // capture layout
      var layout = $(this).attr('data-layout');
  
      // apply layout to markdown level block elements
      var elements = $(this).children().not('d-code, pre.text-output, script');
      elements.each(function(i, el) {
        var layout_div = $('<div class="' + layout + '"></div>');
        if (layout_div.hasClass('shaded')) {
          var shaded_content = $('<div class="shaded-content"></div>');
          $(this).wrap(shaded_content);
          $(this).parent().wrap(layout_div);
        } else {
          $(this).wrap(layout_div);
        }
      });
  
  
      // unwrap the layout-chunk div
      $(this).children().unwrap();
    });
  
    // load distill framework
    load_distill_framework();
  
    // wait for window.distillRunlevel == 4 to do post processing
    function distill_post_process() {
  
      if (!window.distillRunlevel || window.distillRunlevel < 4)
        return;
  
      // hide author/affiliations entirely if we have no authors
      var front_matter = JSON.parse($("#distill-front-matter").html());
      var have_authors = front_matter.authors && front_matter.authors.length > 0;
      if (!have_authors)
        $('d-byline').addClass('hidden');
  
      // table of contents
      if (have_authors) // adjust border if we are in authors
        $('.d-toc').parent().addClass('d-article-with-toc');
  
      // strip links that point to #
      $('.authors-affiliations').find('a[href="#"]').removeAttr('href');
  
      // hide elements of author/affiliations grid that have no value
      function hide_byline_column(caption) {
        $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
      }
  
      // affiliations
      var have_affiliations = false;
      for (var i = 0; i<front_matter.authors.length; ++i) {
        var author = front_matter.authors[i];
        if (author.affiliation !== "&nbsp;") {
          have_affiliations = true;
          break;
        }
      }
      if (!have_affiliations)
        $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');
  
      // published date
      if (!front_matter.publishedDate)
        hide_byline_column("Published");
  
      // document object identifier
      var doi = $('d-byline').find('h3:contains("DOI")');
      var doi_p = doi.next().empty();
      if (!front_matter.doi) {
        // if we have a citation and valid citationText then link to that
        if ($('#citation').length > 0 && front_matter.citationText) {
          doi.html('Citation');
          $('<a href="#citation"></a>')
            .text(front_matter.citationText)
            .appendTo(doi_p);
        } else {
          hide_byline_column("DOI");
        }
      } else {
        $('<a></a>')
           .attr('href', "https://doi.org/" + front_matter.doi)
           .html(front_matter.doi)
           .appendTo(doi_p);
      }
  
       // change plural form of authors/affiliations
      if (front_matter.authors.length === 1) {
        var grid = $('.authors-affiliations');
        grid.children('h3:contains("Authors")').text('Author');
        grid.children('h3:contains("Affiliations")').text('Affiliation');
      }
  
      // inject pre code styles (can't do this with a global stylesheet b/c a shadow root is used)
      $('d-code').each(function(i, val) {
        var style = document.createElement('style');
        style.innerHTML = 'pre code { padding-left: 10px; font-size: 12px; border-left: 2px solid rgba(0,0,0,0.1); } ' +
                          '@media(min-width: 768px) { pre code { padding-left: 18px; font-size: 14px; } }';
        if (this.shadowRoot)
          this.shadowRoot.appendChild(style);
      });
  
      // move appendix-bottom entries to the bottom
      $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
      $('.appendix-bottom').remove();
  
      // clear polling timer
      clearInterval(tid);
  
      // show body now that everything is ready
      on_load_complete();
    }
  
    var tid = setInterval(distill_post_process, 50);
    distill_post_process();
  
  }
  
  function init_downlevel() {
  
    init_common();
  
     // insert hr after d-title
    $('.d-title').after($('<hr class="section-separator"/>'));
  
    // check if we have authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;
  
    // manage byline/border
    if (!have_authors)
      $('.d-byline').remove();
    $('.d-byline').after($('<hr class="section-separator"/>'));
    $('.d-byline a').remove();
  
    // remove toc
    $('.d-toc-header').remove();
    $('.d-toc').remove();
    $('.d-toc-separator').remove();
  
    // move appendix elements
    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
    });
  
  
    // inject headers into references and footnotes
    var refs_header = $('<h3></h3>');
    refs_header.text('References');
    $('#refs').prepend(refs_header);
  
    var footnotes_header = $('<h3></h3');
    footnotes_header.text('Footnotes');
    $('.footnotes').children('hr').first().replaceWith(footnotes_header);
  
    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
    $('.appendix-bottom').remove();
  
    // remove appendix if it's empty
    if ($('.d-appendix').children().length === 0)
      $('.d-appendix').remove();
  
    // prepend separator above appendix
    $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));
  
    // trim code
    $('pre>code').each(function(i, val) {
      $(this).html($.trim($(this).html()));
    });
  
    // move posts-container right before article
    $('.posts-container').insertBefore($('.d-article'));
  
    $('body').addClass('downlevel');
  
    on_load_complete();
  }
  
  
  function init_common() {
  
    // jquery plugin to change element types
    (function($) {
      $.fn.changeElementType = function(newType) {
        var attrs = {};
  
        $.each(this[0].attributes, function(idx, attr) {
          attrs[attr.nodeName] = attr.nodeValue;
        });
  
        this.replaceWith(function() {
          return $("<" + newType + "/>", attrs).append($(this).contents());
        });
      };
    })(jQuery);
  
    // prevent underline for linked images
    $('a > img').parent().css({'border-bottom' : 'none'});
  
    // mark non-body figures created by knitr chunks as 100% width
    $('.layout-chunk').each(function(i, val) {
      var figures = $(this).find('img, .html-widget');
      if ($(this).attr('data-layout') !== "l-body") {
        figures.css('width', '100%');
      } else {
        figures.css('max-width', '100%');
        figures.filter("[width]").each(function(i, val) {
          var fig = $(this);
          fig.css('width', fig.attr('width') + 'px');
        });
  
      }
    });
  
    // auto-append index.html to post-preview links in file: protocol
    // and in rstudio ide preview
    $('.post-preview').each(function(i, val) {
      if (window.location.protocol === "file:")
        $(this).attr('href', $(this).attr('href') + "index.html");
    });
  
    // get rid of index.html references in header
    if (window.location.protocol !== "file:") {
      $('.distill-site-header a[href]').each(function(i,val) {
        $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
      });
    }
  
    // add class to pandoc style tables
    $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
    $('.kable-table').children('table').addClass('pandoc-table');
  
    // add figcaption style to table captions
    $('caption').parent('table').addClass("figcaption");
  
    // initialize posts list
    if (window.init_posts_list)
      window.init_posts_list();
  
    // implmement disqus comment link
    $('.disqus-comment-count').click(function() {
      window.headroom_prevent_pin = true;
      $('#disqus_thread').toggleClass('hidden');
      if (!$('#disqus_thread').hasClass('hidden')) {
        var offset = $(this).offset();
        $(window).resize();
        $('html, body').animate({
          scrollTop: offset.top - 35
        });
      }
    });
  }
  
  document.addEventListener('DOMContentLoaded', function() {
    if (is_downlevel_browser())
      init_downlevel();
    else
      window.addEventListener('WebComponentsReady', init_distill);
  });
  
  </script>
  
  <!--/radix_placeholder_distill-->
  <script src="survival-analyse-met-r_files/jquery-1.11.3/jquery.min.js"></script>
  <script src="survival-analyse-met-r_files/bowser-1.9.3/bowser.min.js"></script>
  <script src="survival-analyse-met-r_files/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="survival-analyse-met-r_files/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
  <!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Survival analyse met R","description":"Dit is een deel van een tutorial die Emily Zabore schreef over survival analyse met R.","authors":[{"author":"Emily Zabore, bewerking Harrie Jonkman","authorURL":"www.harriejonkman.nl","affiliation":"&nbsp;","affiliationURL":"#"}],"publishedDate":"2020-08-21T00:00:00.000+02:00","citationText":"Jonkman, 2020"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Survival analyse met R</h1>
<p>Dit is een deel van een tutorial die Emily Zabore schreef over survival analyse met R.</p>
</div>

<div class="d-byline">
  Emily Zabore, bewerking Harrie Jonkman www.harriejonkman.nl 
  
<br/>08-21-2020
</div>

<div class="d-article">
<h1 id="voorwoord">Voorwoord</h1>
<p>Onlangs volgde ik een webinar bij STATA over analyse van survival data (<a href="https://www.stata.com/training/webinar_series/survival-analysis/" class="uri">https://www.stata.com/training/webinar_series/survival-analysis/</a>). Vervolgens ben ik op zoek gegaan naar een tutorial in R over survival analyse en kwam terecht by deze interessante tutorial van Emily Zabore. Deze had ik al eens eerder zien staan maar dit was het moment om er eens goed naar te kijken. Om mij de techniek goed eigen te maken heb ik deze voor het grootste deel naar het Nederlands toe omgezet en waar nodig bewerkt. Alle credits gaan naar Emily Zabore die dit zo helder en duidelijk op rij heeft gezet (hartelijke dank, Emily). Deze tutorial is dus een introductie op survival analyse en hoe deze techniek in R uit te voeren. Emily Zabore presenteerde dit voor op R-Presentatie serie van het Memorial Sloan Kettering Cancer Center in New York op 30 augustus 2018. Daarna heeft ze deze aangepast voor een meer intensievere training op hetzelfde centrum in Maart 2019. De informatie kun je vinden op haar Github repository waar je <a href="https://github.com/zabore/tutorials">deze tutorial en de bron-files</a> kunt vinden.</p>
<h1 id="deel-1-introductie-op-survival-analyse">Deel 1: Introductie op Survival Analyse</h1>
<p>Deze tutorial bevat enige basisinformatie over survival analyse en de volgende uitgaven kunnen jou hierbij verder helpen:</p>
<blockquote>
<p>Clark, T., Bradburn, M., Love, S., &amp; Altman, D. (2003). Survival analysis part I: Basic concepts and first analyses. 232-238. ISSN 0007-0920.</p>
</blockquote>
<blockquote>
<p>M J Bradburn, T G Clark, S B Love, &amp; D G Altman. (2003). Survival Analysis Part II: Multivariate data analysis – an introduction to concepts and methods. British Journal of Cancer, 89(3), 431-436.</p>
</blockquote>
<blockquote>
<p>Bradburn, M., Clark, T., Love, S., &amp; Altman, D. (2003). Survival analysis Part III: Multivariate data analysis – choosing a model and assessing its adequacy and fit. 89(4), 605-11.</p>
</blockquote>
<blockquote>
<p>Clark, T., Bradburn, M., Love, S., &amp; Altman, D. (2003). Survival analysis part IV: Further concepts and methods in survival analysis. 781-786. ISSN 0007-0920.</p>
</blockquote>
<h2 id="pakketten">Pakketten</h2>
<p>Enkele R-pakketten zullen in ieder geval gebruikt worden:</p>
<ul>
<li><code>lubridate</code></li>
<li><code>survival</code></li>
<li><code>survminer</code></li>
</ul>
<p>Zorg ervoor dat ze geïnstalleerd zijn (wel doen, anders werkt het niet) en open ze vervolgens zo:</p>
<div class="layout-chunk" data-layout="l-body">

</div>
<h2 id="wat-zijn-survival-data">Wat zijn survival data?</h2>
<p>Het gaat om Tijd-tot-gebeurtenis (Time-to-event) data die bestaan uit een aparte starttijd en eindtijd.</p>
<p>Voorbeelden uit kankeronderzoek zijn:</p>
<ul>
<li>Tijd van operatie tot dood;<br />
</li>
<li>Tijd van start van de behandeling tot progressie;<br />
</li>
<li>Tijd van antwoord op herhaling.</li>
</ul>
<h2 id="voorbeelden-uit-andere-velden">Voorbeelden uit andere velden:</h2>
<p>Tijd-tot-gebeurtenis data zijn in verschillende velden algemeen, waaronder:</p>
<ul>
<li>Tijd van HIV infectie tot ontwikkeling van AIDS;<br />
</li>
<li>Tijd tot hardaanval;<br />
</li>
<li>Tijd tot begin van alcoholmisbruik;<br />
</li>
<li>Tijd tot initiatie van sexuele activiteit;<br />
</li>
<li>Tijd tot machine niet meer goed functioneert.</li>
</ul>
<h2 id="hoe-survival-analyse-ook-wel-wordt-genoemd">Hoe survival analyse ook wel wordt genoemd</h2>
<p>Omdat survival analyse in allerlei velden wordt gebruikt, kent het ook verschillende namen:</p>
<ul>
<li>Betrouwbaarheids-analyse;<br />
</li>
<li>Duur-analyse;<br />
</li>
<li>Gebeurtenisgeschiedenis-analyse;<br />
</li>
<li>Tijd-tot-gebeurtenis-analyse.</li>
</ul>
<h2 id="de-longdataset">De longdataset</h2>
<p>De <code>long</code> dataset is beschikbaar via het <code>survival</code> pakket in <code>R</code>. De data bevatten subjecten met gevorderde longkanker van de North Central Cancer Treatment Group. Enkele variabelen (waarvoor ik de Engelse namen gebruik zoals ze in de dataset voorkomen) die we zullen gebruiken om methodes aan te tonen zijn:</p>
<ul>
<li>time: Overlevingstijd (Survival tijd) in dagen;<br />
</li>
<li>status: censoring status 1=censored, 2=dood;<br />
</li>
<li>sex: Man=1 Vrouw=2.</li>
</ul>
<h2 id="wat-is-censoring">Wat is censoring?</h2>
<div class="layout-chunk" data-layout="l-body">
<p><img src="img/trial_anatomy.png" width="522" /></p>
</div>
<blockquote>
<p>RICH JT, NEELY JG, PANIELLO RC, VOELKER CCJ, NUSSENBAUM B, WANG EW. A PRACTICAL GUIDE TO UNDERSTANDING KAPLAN-MEIER CURVES. Otolaryngology head and neck surgery: official journal of American Academy of Otolaryngology Head and Neck Surgery. 2010;143(3):331-336. <a href="doi:10.1016/j.otohns.2010.05.007" class="uri">doi:10.1016/j.otohns.2010.05.007</a>.</p>
</blockquote>
<h2 id="typen-van-censoring">Typen van censoring</h2>
<p>Een subject kan gecensored zijn vanwege:</p>
<ul>
<li>Omdat we ze niet meer te volgen zijn;<br />
</li>
<li>Ze uit de studie zijn gestapt;<br />
</li>
<li>Er geen gebeurtenis kon worden vastgesteld bij het einde van de vaststaande studieperiode.</li>
</ul>
<p>Dit zijn voorbeelden van <strong>rechts</strong> censoring.</p>
<p>Links censoring en interval censoring zijn ook mogelijk en er zijn methodes om dit soort data te analyseren, maar hier beperken we ons tot rechts censoring.</p>
<h2 id="gecensorde-survival-data">Gecensorde survival data</h2>
<div class="layout-chunk" data-layout="l-body">
<p><img src="survival-analyse-met-r_files/figure-html5/swimmer-1.png" width="480" /></p>
</div>
<p>Hoe zouden we in dit voorbeeld de proportie vaststellen van hen die gebeurtenisvrij zijn bij 10 jaar?</p>
<p>Subjecten 6 en 7 zijn <strong>gebeurtenisvrij bij 10 jaar</strong>. Subjecten 2, 9 en 10 hadden de <strong>gebeurtenis voor 10 jaar</strong>. Subjecten 1, 3, 4, 5 en 8 zijn <strong>gecensord voor 10 jaar</strong>, dus we weten niet of ze de gebeurtenis hebben of niet bij 10 jaar - hoe kunnen we deze subjecten incorpereren in onze schatting?</p>
<h2 id="distributie-van-follow-up-tijd">Distributie van follow-up tijd</h2>
<ul>
<li>Gecensorde subjecten geven nog steeds informatie dus zijn geschikt om in de analyse mee te nemen;<br />
</li>
<li>Distributie van follow-up tijden is scheef en kunnen verschillen tussen gecensorde patiënten en hen met gebeurtenissen;<br />
</li>
<li>Follow-up tijden zijn altijd positief.</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<p><img src="survival-analyse-met-r_files/figure-html5/fuptimes-1.png" width="480" /></p>
</div>
<h2 id="componenten-van-survival-data">Componenten van survival data</h2>
<p>Voor subject <span class="math inline">\(i\)</span>:</p>
<ol type="1">
<li>Gebeurtenistijd <span class="math inline">\(T_i\)</span></li>
<li>Censortijd <span class="math inline">\(C_i\)</span></li>
<li><p>Gebeurtenis indicator <span class="math inline">\(\delta_i\)</span>:</p>
<ul>
<li>1 als gebeurtenis geobserveerd (bv. <span class="math inline">\(T_i \leq C_i\)</span>)</li>
<li>0 als gecensord (bv. <span class="math inline">\(T_i &gt; C_i\)</span>)</li>
</ul></li>
<li><p>Geobserveerde tijd: <span class="math inline">\(Y_i = \min(T_i, C_i)\)</span></p></li>
</ol>
<p>De geobserveerde tijden en een gebeurtenis indicator zitten in de <code>long</code> data</p>
<ul>
<li>time: Survival tijd in dagen (<span class="math inline">\(Y_i\)</span>)</li>
<li>status: censor status 1=gecensord, 2=dood (<span class="math inline">\(\delta_i\)</span>)</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<table>
<thead>
<tr class="header">
<th style="text-align: right;">inst</th>
<th style="text-align: right;">time</th>
<th style="text-align: right;">status</th>
<th style="text-align: right;">age</th>
<th style="text-align: right;">sex</th>
<th style="text-align: right;">ph.ecog</th>
<th style="text-align: right;">ph.karno</th>
<th style="text-align: right;">pat.karno</th>
<th style="text-align: right;">meal.cal</th>
<th style="text-align: right;">wt.loss</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: right;">306</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">74</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">90</td>
<td style="text-align: right;">100</td>
<td style="text-align: right;">1175</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: right;">455</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">68</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">90</td>
<td style="text-align: right;">90</td>
<td style="text-align: right;">1225</td>
<td style="text-align: right;">15</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: right;">1010</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">56</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">90</td>
<td style="text-align: right;">90</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">15</td>
</tr>
<tr class="even">
<td style="text-align: right;">5</td>
<td style="text-align: right;">210</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">57</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">90</td>
<td style="text-align: right;">60</td>
<td style="text-align: right;">1150</td>
<td style="text-align: right;">11</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">883</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">60</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">100</td>
<td style="text-align: right;">90</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">12</td>
<td style="text-align: right;">1022</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">74</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">80</td>
<td style="text-align: right;">513</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
</div>
<h2 id="omgaan-met-data-van-datum-in-r">Omgaan met data (van datum) in R</h2>
<p>Data laten vaak de start en einddata zien eerder dan de voorberekende survival tijden. De eerste stap is om er zeker van te zijn dat deze als data in R zijn geformatteerd.</p>
<p>Om het duidelijk te maken, laten we eens een kleine dataset als voorbeeld maken met de variabelen <code>sx_date</code> voor operatiedatum en <code>last_fup_date</code> voor de laatste follow-up datum.</p>
<div class="layout-chunk" data-layout="l-body">
<pre><code>
# A tibble: 3 x 2
  sx_date    last_fup_date
  &lt;chr&gt;      &lt;chr&gt;        
1 2007-06-22 2017-04-15   
2 2004-02-13 2018-07-04   
3 2010-10-27 2016-10-31   </code></pre>
</div>
<p>We zien dat het beide chr-variabelen betreft, wat vaker het geval is. Maar het is nodig ze naar data-variabelen te formatteren.</p>
<h2 id="formatteren-van-data---basis-r">Formatteren van data - basis R</h2>
<div class="layout-chunk" data-layout="l-body">
<pre><code>
# A tibble: 3 x 2
  sx_date    last_fup_date
  &lt;date&gt;     &lt;date&gt;       
1 2007-06-22 2017-04-15   
2 2004-02-13 2018-07-04   
3 2010-10-27 2016-10-31   </code></pre>
</div>
<ul>
<li>Merk op dat in basis <code>R</code> het format zowel de onderscheider als het symbool moet omvatten. Dus als jouw data in format m/d/Y staan dan heb je het <code>format = &quot;%m/%d/%Y&quot;</code>nodig.</li>
<li>Voor een hele lijst van dataformat symbolen kun je kijken naar <a href="https://www.statmethods.net/input/dates.html">https://www.statmethods.net/input/dates.html</a></li>
</ul>
<h2 id="formatteren-van-data-lubridate-pakket">Formatteren van data-lubridate pakket</h2>
<p>We kunnen ook het <code>lubridate</code> pakket gebruien om data te formatteren. In in dit geval, gebruik de <code>ymd</code> functie</p>
<div class="layout-chunk" data-layout="l-body">
<pre><code>
# A tibble: 3 x 2
  sx_date    last_fup_date
  &lt;date&gt;     &lt;date&gt;       
1 2007-06-22 2017-04-15   
2 2004-02-13 2018-07-04   
3 2010-10-27 2016-10-31   </code></pre>
</div>
<ul>
<li>Merk op dat hier de onderscheiders in de <code>R</code> optie niet hoeven worden toegepast.</li>
<li>De help pagina voor <code>?dmy</code> zullen je alle format opties kunnen geven.</li>
</ul>
<h2 id="calculeren-van-survival-tijden---basis-r">Calculeren van survival tijden - basis R</h2>
<p>Nu de data zijn geformatteerd, moeten we het verschil tussen start en eindtijd in een bepaalde eenheid uitdrukken,meestal maanden of jaren. In basis <code>R</code>, wordt<code>difftime</code> gebruikt om het aantal dagen te berekenen tussen onze twee data en dit te converteren naar een numerieke waarde met <code>as.numeric</code>. Dan zetten we het over naar dagen door het te delen door <code>365.25</code>, het gemiddelde aantal dagen in een jaar.</p>
<div class="layout-chunk" data-layout="l-body">

</div>
<div class="layout-chunk" data-layout="l-body">
<pre><code>
# A tibble: 3 x 3
  sx_date    last_fup_date os_yrs
  &lt;date&gt;     &lt;date&gt;         &lt;dbl&gt;
1 2007-06-22 2017-04-15      9.82
2 2004-02-13 2018-07-04     14.4 
3 2010-10-27 2016-10-31      6.01</code></pre>
</div>
<h2 id="berekenen-van-survival-tijden---lubridate">Berekenen van survival tijden - lubridate</h2>
<p>Als we het <code>lubridate</code> pakket gebruiken, dan drukt <code>%--%</code> een tijd interval uit, dat dan geconverteerd wordt naar het aantal seconden door <code>as.duration</code> te gebruiken en tenslotte naar jaren door het te delen door <code>dyears(1)</code>, wat het aantal seconden in een jaar geeft.</p>
<div class="layout-chunk" data-layout="l-body">
<pre><code>
# A tibble: 3 x 3
  sx_date    last_fup_date os_yrs
  &lt;date&gt;     &lt;date&gt;         &lt;dbl&gt;
1 2007-06-22 2017-04-15      9.82
2 2004-02-13 2018-07-04     14.4 
3 2010-10-27 2016-10-31      6.01</code></pre>
</div>
<ul>
<li><em>Notitie</em>: we moeten het <code>lubridate</code> pakket laden door <code>library</code> te gebruiken en zo toegang te krijgen tot specifieke functies.</li>
</ul>
<h2 id="gebeurtenis-indicator">Gebeurtenis indicator</h2>
<p>Voor de componenten van survivaldata noemde ik eerder de gebeurtenisindicator:</p>
<p>Gebeurtenisindicator <span class="math inline">\(\delta_i\)</span>:</p>
<ul>
<li>1 als de gebeurtenis heeft plaatsgevonden (bv. <span class="math inline">\(T_i \leq C_i\)</span>)</li>
<li>0 als het gecensord is (i.e. <span class="math inline">\(T_i &gt; C_i\)</span>)</li>
</ul>
<p>Echter, in <code>R</code> accepteert de <code>Surv</code>-function ook ‘TRUE/FALSE’ (’TRUE = gebeurtenis) of 1/2 (2 = gebeurtenis).</p>
<p>In de <code>lung</code> data, hebben we:</p>
<ul>
<li>status: censoring status 1=gecensord, 2=dood</li>
</ul>
<h2 id="survivalfunctie">Survivalfunctie</h2>
<p>De waarschijnlijkheid dat een subject zal overleven voorbij een bepaalde gespecificeerde tijd</p>
<p><span class="math display">\[S(t) = Pr(T&gt;t) = 1 - F(t)\]</span></p>
<p><span class="math inline">\(S(t)\)</span>: survivalfunctie <span class="math inline">\(F(t) = Pr(T \leq t)\)</span>: cumulatieve distributiefunctie</p>
<p>In theorie is de survivalfunctie gelijdelijk; in de praktijk observeren we gebeurtenissen op een discrete tijdschaal.</p>
<h2 id="survivalwaarschijnlijkheid">Survivalwaarschijnlijkheid</h2>
<ul>
<li><strong>Survivalwaarschijnlijkheid</strong> op een bepaalde tijd, <span class="math inline">\(S(t)\)</span>, is een conditionele waarschijnlijkheid van overleven voorbij die tijd gegeven dat een individu overleefd heeft juist voorafgaand aan die tijd.<br />
</li>
<li>Het kan worden geschat als het aantal patiënten die leven zonder verlies van follow-up gegevens op die tijd, gedeeld door het aantal patiënten die leven voorafgaand aan dat moment.<br />
</li>
<li>De <strong>Kaplan-Meier</strong> schatting van survivalwaarschijnlijkheid is het product van deze conditionele waarschijnlijkheden tot op dat moment.<br />
</li>
<li>Op tijd 0, de survivalwaarschijnlijkheid is 1, bv. <span class="math inline">\(S(t_0) = 1\)</span></li>
</ul>
<h2 id="creëren-van-survivalobjecten">Creëren van survivalobjecten</h2>
<p>De Kaplan-Meier methode is de meest algemene manier om survivaltijden en -waarschijnlijkheden te schatten. Het is een niet-parametrische benadering die resulteert in een stapsgewijze-functie, met steeds een stap naar beneden iedere keer wanneer de gebeurtenis plaatsvindt.</p>
<ul>
<li>De <code>Surv</code> functie van het <code>survival</code> pakket creëert een survival object voor gebruik als antwoord in een modelformule. Er is een ingang voor elk subject dat de survivaltijd is, dat wordt gevolgd door een <code>+</code> als het subject gecensord is. Laten we eens naar de eerste tien observaties kijken, dat maakt meer duidelijk:</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<pre><code>
 [1]  306   455  1010+  210   883  1022+  310   361   218   166 </code></pre>
</div>
<h2 id="schatten-van-de-survivalcurves-met-de-kaplan-meier-methode">Schatten van de survivalcurves met de Kaplan-Meier methode</h2>
<ul>
<li>De <code>survfit</code> functie creëert survivalcurves die gebaseerd zijn op een formule. Laten we de overallsurvivalcurve eens genereren voor de hele cohort, benoem het als het object <code>f1</code>, en kijk naar de namen(<code>names</code>) van dat object:</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<pre><code>
 [1] &quot;n&quot;         &quot;time&quot;      &quot;n.risk&quot;    &quot;n.event&quot;   &quot;n.censor&quot; 
 [6] &quot;surv&quot;      &quot;std.err&quot;   &quot;cumhaz&quot;    &quot;std.chaz&quot;  &quot;type&quot;     
[11] &quot;logse&quot;     &quot;conf.int&quot;  &quot;conf.type&quot; &quot;lower&quot;     &quot;upper&quot;    
[16] &quot;call&quot;     </code></pre>
</div>
<p>Enkele sleutelcomponenten van dit <code>survfit</code> object dat wordt gebruikt om survivalcurves te maken omvatten:</p>
<ul>
<li><code>time</code>, die de start en eindpunten van elk tijdinterval inhouden<br />
</li>
<li><code>surv</code>, die de survivalwaarschijnlijkheid inhouden die corresponderen met elke tijd (<code>time</code>)</li>
</ul>
<h2 id="kaplan-meier-grafiek---basis-r">Kaplan-Meier grafiek - basis R</h2>
<p>Nu plotten we het <code>survfit</code> object met basis <code>R</code> om de Kaplan-Meier grafiek te krijgen.</p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="survival-analyse-met-r_files/figure-html5/unnamed-chunk-2-1.png" width="480" /></p>
</div>
<ul>
<li>De standaard grafiek in basis <code>R</code> toont de stapfunctie (doorlopende lijn) met de betrouwbaarheidsintervallen die ermee samenhangen (stippellijnen);<br />
</li>
<li>Horizontale lijnen representeren de survivalduur voor het interval;<br />
</li>
<li>De interval beëindigd door een gebeurtenis;<br />
</li>
<li>De hoogte van de verticale lijnen laat de verandering in cumulatievewaarschijnlijkheid zien;<br />
</li>
<li>Gecensorde observaties, aangegeven met vinkjes, reduceren de cumulatieve survival tussen intervallen. (<em>Opmerking</em> de vinkjes voor gecensorde patiënten worden niet in deze standaardgrafiek getoond, maar worden toegevoegd door de optie <code>mark.time = TRUE</code>).</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<p><img src="survival-analyse-met-r_files/figure-html5/unnamed-chunk-3-1.png" width="480" /></p>
</div>
<h2 id="kaplan-meier-grafiek---ggsurvplot">Kaplan-Meier grafiek - ggsurvplot</h2>
<p>Als alternatief kun je de <code>ggsurvplot</code> functie gebruiken van het <code>survminer</code> pakket dat op <code>ggplot2</code> is gebouwd, en dat kan worden gebruikt om de Kaplan-Meier grafieken te maken. Bekijk de <a href="https://rpkgs.datanovia.com/survminer/survminer_cheatsheet.pdf">cheatsheet</a> maar eens voor het <code>survminer</code> pakket.</p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="survival-analyse-met-r_files/figure-html5/unnamed-chunk-4-1.png" width="480" /></p>
</div>
<ul>
<li>De standaardgrafiek van <code>ggsurvplot</code> laat de stapfunctie (doorlopende lijn) zien met bijbehorende betrouwbaarheidsbanden (donkere gebied);<br />
</li>
<li>De vinkjes voor gecensorde patienten worden hier wel standaard getoond, enigszins onduidelijk aangegeven in de lijn in dit voorbeeld en kan worden weggehaald met de optie <code>censor = FALSE</code>.</li>
</ul>
<h2 id="schatten-van-x-jaar-overleven">Schatten van <span class="math inline">\(x\)</span>-jaar overleven</h2>
<p>Een kwantiteit waar we in de survivalanalyse vaak in geïnteresseerd zijn is de waarschijnlijkheid van overleven voorbij een bepaald aantal (<span class="math inline">\(x\)</span>) jaren.</p>
<p>Bijvoorbeeld, om de waarschijnlijkheid te schatten van overleven bij <span class="math inline">\(1\)</span> jaar, gebruik je <code>summary</code> met het <code>times</code> argument (<em>Opgelet</em> de <code>time</code> variabele in de <code>lung</code> data is eigenlijk in dagen, dus we moeten <code>times = 365.25</code> gebruiken).</p>
<div class="layout-chunk" data-layout="l-body">
<pre><code>
Call: survfit(formula = Surv(time, status) ~ 1, data = lung)

 time n.risk n.event survival std.err lower 95% CI upper 95% CI
  365     65     121    0.409  0.0358        0.345        0.486</code></pre>
</div>
<p>We vinden dat de <span class="math inline">\(1\)</span>-jaar waarschijnlijkheid van overleven in deze study 41% is.</p>
<p>De boven- en ondergrens van het 95% betrouwbaarheidsinterval wordt ook getoond.</p>
<h2 id="x-jaar-survival-en-de-survivalcurve"><span class="math inline">\(x\)</span>-jaar survival en de survivalcurve</h2>
<p>De <span class="math inline">\(1\)</span>-jaar survivalwaarschijnlijkheid is het punt op de y-as dat correspondeert met <span class="math inline">\(1\)</span> jaar op de x-as voor de survivalcurve.</p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="survival-analyse-met-r_files/figure-html5/unnamed-chunk-5-1.png" width="480" /></p>
</div>
<h2 id="x-jaar-survival-wordt-vaak-niet-correct-geschat"><span class="math inline">\(x\)</span>-jaar survival wordt vaak niet correct geschat</h2>
<p>Wat gebeurt als je een “naïeve” schatting gebruikt?</p>
<p>121 van de 228 patiënten stierven bij <span class="math inline">\(1\)</span> jaar dus:</p>
<p><span class="math display">\[\Big(1 - \frac{121}{228}\Big) \times 100 = 47\%\]</span> - Je krijgt een <strong>incorrecte</strong> schatting van de <span class="math inline">\(1\)</span>-jaar survivalwaarschijnlijheid als het feit over het hoofd ziet dat 42 patiënen waren gecensord voor <span class="math inline">\(1\)</span> jaar.</p>
<ul>
<li>Herinner dat de <strong>correcte</strong> schatting van de <span class="math inline">\(1\)</span>-jaar survivalwaarschijnlijkheid 41% was.</li>
</ul>
<h2 id="impact-op-x-jaar-survival-door-censoring-over-het-hoofd-te-zien">Impact op <span class="math inline">\(x\)</span>-jaar survival door censoring over het hoofd te zien</h2>
<ul>
<li>Stel twee studies, met elk 228 subjecten. In iedere studie zijn er 165 doden. Geen censoring bij de een (oranje lijn), 63 patiënten gecensord in de andere (blauwe lijn);<br />
</li>
<li>Ontkennen van censoring leidt tot een <strong>overschatting</strong> van de overall survivalwaarschijnlijkheid, omdat de gecensorde subjecten alleen informatie bijdragen voor het <strong>deel</strong> van de follow-up tijd en dan vallen ze uit de risk set, dus drukken ze de cumulatieve waarschijnlijkheid van de survival naar beneden.</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<p><img src="survival-analyse-met-r_files/figure-html5/unnamed-chunk-6-1.png" width="480" /></p>
</div>
<h2 id="schatten-van-de-mediaan-survivaltijd">Schatten van de mediaan survivaltijd</h2>
<p>Een andere kwantiteit die vaak interessant is voor overlevingsanalyse is de gemiddelde overlevingstijd, die we kwantificeren met behulp van de mediaan. Er wordt niet verwacht dat de overlevingstijd normaal wordt verdeeld, dus het gemiddelde is geen passende samenvatting.</p>
<p>We kunnen dit rechtstreeks verkrijgen uit ons <code>survfit</code> object</p>
<div class="layout-chunk" data-layout="l-body">
<pre><code>
Call: survfit(formula = Surv(time, status) ~ 1, data = lung)

      n  events  median 0.95LCL 0.95UCL 
    228     165     310     285     363 </code></pre>
</div>
<p>We zien dat de mediaan survivaltijd 310 dagen is. De onder- en bovengrens van het 95% betrouwbaarheidsinterval worden ook gegeven.</p>
<h2 id="mediaan-overlevingstijd-and-de-overlevingscurve">Mediaan overlevingstijd and de overlevingscurve</h2>
<p>Mediaan survival is de tijd die correspondeert met de overlevingswaarschijnlijkheid van <span class="math inline">\(0.5\)</span>:</p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="survival-analyse-met-r_files/figure-html5/unnamed-chunk-8-1.png" width="480" /></p>
</div>
<h2 id="de-mediaan-van-overleving-wordt-vaak-verkeerd-geschat">De mediaan van overleving wordt vaak verkeerd geschat</h2>
<p>Wat gebeurt als je een “naïeve” schatting gebruikt?</p>
<p>Vat de mediaan overlevingstijd samen onder de 165 patiënten die stierven</p>
<div class="layout-chunk" data-layout="l-body">
<pre><code>
  median_surv
1         226</code></pre>
</div>
<ul>
<li>Je krijgt een <strong>verkeerde</strong> schatting van de mediaan overlevingstijd van 226 dagen als je het feit ontkent dat gecensorde patiënten ook bijdragen aan de follow-up tijd.</li>
<li>Onthoud dat de <strong>correcte</strong> schatting van de mediaan overlevingstijd 310 dagen is.</li>
</ul>
<h2 id="impact-op-de-overlevingsmediaan-wanneer-je-censoring-negeert">Impact op de overlevingsmediaan wanneer je censoring negeert</h2>
<ul>
<li>Negeren van censoring creëert een kunstmatig lagere overlevinscurve omdat de follow-up tijd die gecensorde patiënten bijdragen er buiten wordt gehouden (paarse lijn).<br />
</li>
<li>De ware overlevingscurve voor de <code>lung</code> data zie je voor de vergelijking in blauw staan.</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<p><img src="survival-analyse-met-r_files/figure-html5/unnamed-chunk-10-1.png" width="480" /></p>
</div>
<h2 id="vergelijken-van-overlevingstijd-tussen-groepen">Vergelijken van overlevingstijd tussen groepen</h2>
<ul>
<li>We kunnen significantie testen tussen-groepen uitvoeren met een ‘log-rank test’.<br />
</li>
<li>De ‘log-rank test’ weegt observaties gelijk over de hele follow-up tijd en is de meest algemene manier om overlevingstijden tussen groepen te vergelijken.<br />
</li>
<li>Er zijn ook versie die meer gewicht geven aan de eerdere of latere follow-up die meer geschikt zijn afhankelijk van de onderzoeksvraag (zie <code>?survdiff</code> voor verschillende test opties).</li>
</ul>
<p>We krijgen de log-rank p-waarde wanneer we de <code>survdiff</code> functie gebruiken. Bijvoorbeeld, we kunnen testen of er een verschil was in overlevingstijd wat sexe betreft in de <code>lung</code> data.</p>
<div class="layout-chunk" data-layout="l-body">
<pre><code>
Call:
survdiff(formula = Surv(time, status) ~ sex, data = lung)

        N Observed Expected (O-E)^2/E (O-E)^2/V
sex=1 138      112     91.6      4.55      10.3
sex=2  90       53     73.4      5.68      10.3

 Chisq= 10.3  on 1 degrees of freedom, p= 0.001 </code></pre>
</div>
<h2 id="extraheren-van-informatie-van-een-survdiff-object">Extraheren van informatie van een survdiff object</h2>
<p>Het is lastig om een p-waarde te extraheren van de resultaten van <code>survdiff</code>. Hier is een coderegel om dat te doen.</p>
<div class="layout-chunk" data-layout="l-body">
<pre><code>
[1] 0.001311165</code></pre>
</div>
<p>Of er is de <code>sdp</code> functie in het <code>ezfun</code> pakket, dat je kunt installeren via <code>devtools::install_github(&quot;zabore/ezfun&quot;)</code>. Het geeft een opgemaakt p-value terug.</p>
<div class="layout-chunk" data-layout="l-body">
<pre><code>
[1] 0.001</code></pre>
</div>
<h2 id="het-cox-regressiemodel">Het Cox regressiemodel</h2>
<p>We kunnen een effectgrootte voor een enkele variabele kwantificeren of meer dan één variabele opnemen in een regressiemodel wanneer we rekening willen houden met de effecten van meerdere variabelen.</p>
<p>Het Cox-regressiemodel is een semi-parametrisch model dat kan worden gebruikt voor univariabele en multivariabele regressiemodellen met overlevingsuitkomsten.</p>
<p><span class="math display">\[h(t|X_i) = h_0(t) \exp(\beta_1 X_{i1} + \cdots + \beta_p X_{ip})\]</span></p>
<p><span class="math inline">\(h(t)\)</span>: gevaar (‘hazard’), of de mate waarin de gebeurtenis plaatsvindt <span class="math inline">\(h_0(t)\)</span>: onderliggende baseline van het gevaar (‘hazard’).</p>
<p>Enkele aannames van het model:</p>
<ul>
<li>non-informatieve censoring</li>
<li>proportionele ‘hazards’</li>
</ul>
<p><em>Opgelet</em>: parametrische regressiemodels voor overlevingsuitkomsten zijn ook beschikbaar, daar zal hier niet op worden ingegaan.</p>
<p>We kunnen regressiemodellen voor survivaldata draaien door de <code>coxph</code> functie te gebruiken, die een <code>Surv</code> object aan de linkerkant neemt en een standaard regressie formule in <code>R</code> aan de rechterkant hanteert.</p>
<div class="layout-chunk" data-layout="l-body">
<pre><code>
Call:
coxph(formula = Surv(time, status) ~ sex, data = lung)

       coef exp(coef) se(coef)      z       p
sex -0.5310    0.5880   0.1672 -3.176 0.00149

Likelihood ratio test=10.63  on 1 df, p=0.001111
n= 228, number of events= 165 </code></pre>
</div>
<h2 id="formatteren-van-cox-regressieresultaten">Formatteren van Cox regressieresultaten</h2>
<p>We kunnen een opgeschoonde versie van de output zien door de <code>tidy</code> functie van het <code>broom</code> pakket te gebruiken:</p>
<div class="layout-chunk" data-layout="l-body">
<table>
<thead>
<tr class="header">
<th style="text-align: left;">term</th>
<th style="text-align: right;">estimate</th>
<th style="text-align: right;">std.error</th>
<th style="text-align: right;">statistic</th>
<th style="text-align: right;">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">sex</td>
<td style="text-align: right;">0.5880028</td>
<td style="text-align: right;">0.1671786</td>
<td style="text-align: right;">-3.176385</td>
<td style="text-align: right;">0.0014912</td>
</tr>
</tbody>
</table>
</div>
<p>Of door <code>tbl_regression</code> te gebruiken van het <code>gtsummary</code> pakket.</p>
<div class="layout-chunk" data-layout="l-body">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#bthodvqsjj .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#bthodvqsjj .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#bthodvqsjj .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#bthodvqsjj .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#bthodvqsjj .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bthodvqsjj .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#bthodvqsjj .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#bthodvqsjj .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#bthodvqsjj .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#bthodvqsjj .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#bthodvqsjj .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#bthodvqsjj .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#bthodvqsjj .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#bthodvqsjj .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#bthodvqsjj .gt_from_md > :first-child {
  margin-top: 0;
}

#bthodvqsjj .gt_from_md > :last-child {
  margin-bottom: 0;
}

#bthodvqsjj .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#bthodvqsjj .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#bthodvqsjj .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#bthodvqsjj .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#bthodvqsjj .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#bthodvqsjj .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#bthodvqsjj .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bthodvqsjj .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#bthodvqsjj .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#bthodvqsjj .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#bthodvqsjj .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#bthodvqsjj .gt_left {
  text-align: left;
}

#bthodvqsjj .gt_center {
  text-align: center;
}

#bthodvqsjj .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#bthodvqsjj .gt_font_normal {
  font-weight: normal;
}

#bthodvqsjj .gt_font_bold {
  font-weight: bold;
}

#bthodvqsjj .gt_font_italic {
  font-style: italic;
}

#bthodvqsjj .gt_super {
  font-size: 65%;
}

#bthodvqsjj .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="bthodvqsjj" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>HR</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>95% CI</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>p-value</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_left">sex</td>
      <td class="gt_row gt_center">0.59</td>
      <td class="gt_row gt_center">0.42, 0.82</td>
      <td class="gt_row gt_center">0.001</td>
    </tr>
  </tbody>
  
  <tfoot>
    <tr class="gt_footnotes">
      <td colspan="4">
        <p class="gt_footnote">
          <sup class="gt_footnote_marks">
            <em>1</em>
          </sup>
           
          HR = Hazard Ratio, CI = Confidence Interval
          <br />
        </p>
      </td>
    </tr>
  </tfoot>
</table></div>
</div>
<h2 id="hazard-ratios">Hazard ratio’s</h2>
<ul>
<li>De interesse bij een Cox-regressiemodel gaat uit naar een <strong>hazard ratio (HR)</strong>. De HR staat voor de verhouding van de gevaren tussen twee groepen op een bepaald moment;<br />
</li>
<li>De HR wordt geïnterpreteerd als het momentane tempo waarin de gebeurtenis zich voordoet bij degenen die nog steeds risico lopen voor de gebeurtenis. Het is <strong>geen</strong> risico, maar wordt wel als zodanig geïnterpreteerd;<br />
</li>
<li>Als je een regressieparameter hebt van <span class="math inline">\(\beta\)</span> (van kolom <code>estimate</code> in ons <code>coxph</code>) dan is HR = <span class="math inline">\(\exp(\beta)\)</span>;<br />
</li>
<li>Een HR &lt; 1 duidt op een verminderd doodsgevaar, terwijl een HR &gt; 1 duidt op een verhoogd doodsgevaar;<br />
</li>
<li>Dus onze HR = 0.59 betekent dat er ongeveer 0.6 keer zoveel vrouwen sterven als mannen, op een bepaald moment.</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<p><img src="survival-analyse-met-r_files/figure-html5/unnamed-chunk-17-1.png" width="480" /></p>
</div>
<h1 id="deel-2-oriëntatiepuntanalyse-en-tijd-afhankelijke-covariaten">Deel 2: Oriëntatiepuntanalyse en Tijd Afhankelijke Covariaten</h1>
<p>In deel 1 hebben we met behulp van log-rank tests en Cox regressie de associaties tussen covariaten die van belang zijn en overlevingsresultaten onderzocht.</p>
<p>Maar deze analyses zijn gebaseerd op het meten van het covariaat op <strong>baseline</strong>, dat wil zeggen, voordat de vervolgtijd voor het evenement begint.</p>
<p>Wat gebeurt er als u geïnteresseerd bent in een covariaat dat wordt gemeten <strong>nadat</strong> de vervolgtijd begint?</p>
<h2 id="voorbeeld-tumorreactie">Voorbeeld: Tumorreactie</h2>
<p>In het algemeen wordt de totale overleving gemeten vanaf het begin van de behandeling en de interesse gaat daarbij uit naar de associatie tussen de volledige respons op de behandeling en de overleving.</p>
<p>Anderson et al. (JCO, 1983) beschreven waarom tradionele methoden zoals log-rank tests of Cox regressie in dit scenario bevooroordeeld zijn ten gunste van de responders en stelden de oriëntatiepuntaanpak voor. De <strong>nul-hypothese</strong> in de landmarkbenadering is dat het overleven van een oriëntatiepunt niet afhankelijk is van de status van de respons bij dat punt.</p>
<blockquote>
<p>Anderson, J., Cain, K., &amp; Gelber, R. (1983). Analysis of survival by tumor response. Journal of Clinical Oncology : Official Journal of the American Society of Clinical Oncology, 1(11), 710-9.</p>
</blockquote>
<h2 id="andere-voorbeelden">Andere voorbeelden</h2>
<p>Enkele andere mogelijke covariaten die van belang zijn bij kankeronderzoek en die niet op de basislijn kunnen worden gemeten, zijn onder andere:</p>
<ul>
<li>transplantatiefout</li>
<li>ent versus gastheer ziekte</li>
<li>tweede resectie</li>
<li>adjuvante therapie</li>
<li>naleving</li>
<li>ongunstige gebeurtenissen</li>
</ul>
<h2 id="voorbeeld-data---de-bmt-dataset-van-het-semicomprisks-pakket">Voorbeeld data - de BMT dataset van het SemiCompRisks pakket</h2>
<p>Gegevens over 137 beenmergpatiënten. Variabelen van belang zijn onder meer:</p>
<ul>
<li><code>T1</code> tijd(in dagen) tot dood or laatste follow-up</li>
<li><code>delta1</code> dood indicator; 1-Dood, 0-Levend</li>
<li><code>TA</code> tijd (in dagen) tot ent versus gastheer ziekte</li>
<li><code>deltaA</code> acute ent versus gastheer ziekte indicator; 1-Ontwikkelt ent versus gastheer ziekte, 0-Nooit een ent versus gastheer ziekte ontwikkelt.</li>
</ul>
<p>Laten we de gegevens laden voor gebruik in de voorbeelden.</p>
<div class="layout-chunk" data-layout="l-body">

</div>
<h2 id="oriëntatiepuntmethode">Oriëntatiepuntmethode</h2>
<ol type="1">
<li>Selecteer een vaste tijd na de basislijn als uw oriëntatiepunt. <em>Opgelet</em>: dit moet worden gedaan op basis van klinische informatie, voorafgaand aan de inspectie van de gegevens.</li>
<li>Subset populatie voor degenen die volgen ten minste tot aan de mijlpaal tijd. <em>Opgelet</em>: rapporteer altijd het nummer dat is uitgesloten vanwege het evenement van belang of de censuur vóór het tijdstip van de mijlpaal.</li>
<li>Bereken de follow-up van de landmarktijd en voer de traditionele log-ranktests of Cox-regressie toe.</li>
</ol>
<p>In de <code>BMT</code> data interesseert men zich voor de associatie tussen acute ent versus gastheer ziekte (op zijn Engels ‘aGVHD’) en overleving. Maar dit wordt beoordeeld na de transplantatie, wat onze basislijntijd is of bij het begin van de follow-up-tijd.</p>
<p><strong>Stap 1</strong> Selecteer een mijlpaal tijd</p>
<p>Meestal treedt de ziekte op binnen de eerste 90 dagen na de transplantatie, dus gebruiken we een 90-dagen oriëntatiepunt.</p>
<p>De interesse gaat uit naar de associatie tussen acute enting versus gastheerziekte (‘aGVHD’) en overleving. Maar ‘aGVHD’ wordt beoordeeld na de transplantatie, wat onze basislijn is, of het begin van de follow-up, tijd.</p>
<p><strong>Step 2</strong> Subset populatie voor degenen die gevolgd zijn ten minste tot mijlpaal tijd</p>
<div class="layout-chunk" data-layout="l-body">

</div>
<p>Dit reduceert onze sampleomvang van 137 tot 122.</p>
<ul>
<li>Alle 15 data zijn exclusief patiënten die voor het 90-daags oriëntatiepunt zijn overleden.</li>
</ul>
<p>De belangstelling gaat uit naar het verband tussen acute enting versus gastheerziekte (‘aGVHD’) en overleving. Maar ‘aGVHD’ wordt vastgesteld na de transplantatie, wat onze basislijn is of het begin van de follow-up-tijd.</p>
<p><strong>Step 3</strong> Berekenen van follow-up tijd vanuit het oriëntatiepunt en toepassen van traditionele methodes.</p>
<div class="layout-chunk" data-layout="l-body">

</div>
<div class="layout-chunk" data-layout="l-body">
<p><img src="survival-analyse-met-r_files/figure-html5/unnamed-chunk-21-1.png" width="480" /></p>
</div>
<h2 id="cox-regressie-voor-oriëntatievoorbeeld-bij-gebruik-van-bmt-data">Cox-regressie voor oriëntatievoorbeeld bij gebruik van BMT data</h2>
<p>In de Cox-regressie kun je de <code>subset</code> option in <code>coxph</code> gebruiken om die patiënten uit te sluiten die niet zijn gevolgd gedurende de oriëntatietijd.</p>
<div class="layout-chunk" data-layout="l-body">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#dmpqwnvorn .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#dmpqwnvorn .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#dmpqwnvorn .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#dmpqwnvorn .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#dmpqwnvorn .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dmpqwnvorn .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#dmpqwnvorn .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#dmpqwnvorn .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#dmpqwnvorn .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#dmpqwnvorn .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#dmpqwnvorn .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#dmpqwnvorn .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#dmpqwnvorn .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#dmpqwnvorn .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#dmpqwnvorn .gt_from_md > :first-child {
  margin-top: 0;
}

#dmpqwnvorn .gt_from_md > :last-child {
  margin-bottom: 0;
}

#dmpqwnvorn .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#dmpqwnvorn .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#dmpqwnvorn .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#dmpqwnvorn .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#dmpqwnvorn .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#dmpqwnvorn .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#dmpqwnvorn .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dmpqwnvorn .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#dmpqwnvorn .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#dmpqwnvorn .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#dmpqwnvorn .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#dmpqwnvorn .gt_left {
  text-align: left;
}

#dmpqwnvorn .gt_center {
  text-align: center;
}

#dmpqwnvorn .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#dmpqwnvorn .gt_font_normal {
  font-weight: normal;
}

#dmpqwnvorn .gt_font_bold {
  font-weight: bold;
}

#dmpqwnvorn .gt_font_italic {
  font-style: italic;
}

#dmpqwnvorn .gt_super {
  font-size: 65%;
}

#dmpqwnvorn .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="dmpqwnvorn" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>HR</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>95% CI</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>p-value</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_left">deltaA</td>
      <td class="gt_row gt_center">1.08</td>
      <td class="gt_row gt_center">0.57, 2.07</td>
      <td class="gt_row gt_center">0.8</td>
    </tr>
  </tbody>
  
  <tfoot>
    <tr class="gt_footnotes">
      <td colspan="4">
        <p class="gt_footnote">
          <sup class="gt_footnote_marks">
            <em>1</em>
          </sup>
           
          HR = Hazard Ratio, CI = Confidence Interval
          <br />
        </p>
      </td>
    </tr>
  </tfoot>
</table></div>
</div>
<h2 id="tijd-afhankelijke-covariaat">Tijd-afhankelijke covariaat</h2>
<p>Een alternatief voor de oriëntatieanalyse is de incorporatie van een tijd-afhankelijke covariaat. Dit is beter geschikt wanneer</p>
<ul>
<li>de waarde van covariaat over tijd verandert;<br />
</li>
<li>als er geen duidelijke oriëntatietijd is;<br />
</li>
<li>wanneer de oriëntatie tot heel veel uitsluitingen leidt.</li>
</ul>
<h2 id="data-setup-van-een-tijd-afhankelijke-covariaat">Data setup van een tijd-afhankelijke covariaat</h2>
<p>Analyse van tijdafhankelijke covariaten in <code>R</code> veronderstelt de setup van een speciale dataset. Informatie hierover vind je in een gedetailleerd artikel door de auteur van het <code>survival</code> pakket <a href="https://cran.r-project.org/web/packages/survival/vignettes/timedep.pdf">Using Time Dependent Covariates and Time Dependent Coefficients in the Cox Model</a>.</p>
<p>Er was geen ID variable in het <code>BMT</code> data, dat nodig is om die special dataset te maken. Dus maak er een die heet <code>my_id</code>.</p>
<div class="layout-chunk" data-layout="l-body">

</div>
<p>Gebruik de <code>tmerge</code> functie met de <code>event</code> en <code>tdc</code> functieopties om die speciale dataset te creëren.</p>
<ul>
<li><code>tmerge</code> creëert een lange dataset met verschillende tijdintervallen voor de verschillende covariaatwaarden voor elke patiënt;<br />
</li>
<li><code>event</code> creëert de nieuwe tijdindicator die samengaat met de gecreëerde tijdintervallen;<br />
</li>
<li><code>tdc</code> creëert de tijd-afhankelijke covariaatindicator die samengaat met de gecreëerde tijdintervallen.</li>
</ul>
<div class="layout-chunk" data-layout="l-body">

</div>
<h2 id="time-afhankelijke-covariaat---voorbeeld-van-enkele-patiënten">Time-afhankelijke covariaat - voorbeeld van enkele patiënten</h2>
<p>Om te zien wat dit doet, laten we eens kijken naar de eerste vijf individuele patiënten.</p>
<p>De variabelen waar onze interesse naar uitgaan zien er in de originele data als volgt uit:</p>
<div class="layout-chunk" data-layout="l-body">
<pre><code>
  my_id   T1 delta1   TA deltaA
1     1 2081      0   67      1
2     2 1602      0 1602      0
3     3 1496      0 1496      0
4     4 1462      0   70      1
5     5 1433      0 1433      0</code></pre>
</div>
<p>De nieuwe dataset voor dezelfde patiënten ziet er als volgt uit:</p>
<div class="layout-chunk" data-layout="l-body">
<pre><code>
  my_id   T1 delta1 id tstart tstop death agvhd
1     1 2081      0  1      0    67     0     0
2     1 2081      0  1     67  2081     0     1
3     2 1602      0  2      0  1602     0     0
4     3 1496      0  3      0  1496     0     0
5     4 1462      0  4      0    70     0     0
6     4 1462      0  4     70  1462     0     1
7     5 1433      0  5      0  1433     0     0</code></pre>
</div>
<h2 id="tijd-afhankelijke-covariaat---cox-regressie">Tijd-afhankelijke covariaat - Cox regressie</h2>
<p>Nu kunnen we de tijd-afhankelijke covariaat analyseren zoals we gewend zijn met Coxregressie met <code>coxph</code> en een aanpassing in het gebruik van <code>Surv</code> door zowel de argumenten <code>time</code> en <code>time2</code> op te nemen.</p>
<div class="layout-chunk" data-layout="l-body">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#vcipwnwpuw .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#vcipwnwpuw .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#vcipwnwpuw .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#vcipwnwpuw .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#vcipwnwpuw .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vcipwnwpuw .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#vcipwnwpuw .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#vcipwnwpuw .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#vcipwnwpuw .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#vcipwnwpuw .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#vcipwnwpuw .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#vcipwnwpuw .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#vcipwnwpuw .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#vcipwnwpuw .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#vcipwnwpuw .gt_from_md > :first-child {
  margin-top: 0;
}

#vcipwnwpuw .gt_from_md > :last-child {
  margin-bottom: 0;
}

#vcipwnwpuw .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#vcipwnwpuw .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#vcipwnwpuw .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#vcipwnwpuw .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#vcipwnwpuw .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#vcipwnwpuw .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#vcipwnwpuw .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vcipwnwpuw .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#vcipwnwpuw .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#vcipwnwpuw .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#vcipwnwpuw .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#vcipwnwpuw .gt_left {
  text-align: left;
}

#vcipwnwpuw .gt_center {
  text-align: center;
}

#vcipwnwpuw .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#vcipwnwpuw .gt_font_normal {
  font-weight: normal;
}

#vcipwnwpuw .gt_font_bold {
  font-weight: bold;
}

#vcipwnwpuw .gt_font_italic {
  font-style: italic;
}

#vcipwnwpuw .gt_super {
  font-size: 65%;
}

#vcipwnwpuw .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="vcipwnwpuw" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>HR</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>95% CI</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>p-value</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_left">agvhd</td>
      <td class="gt_row gt_center">1.40</td>
      <td class="gt_row gt_center">0.81, 2.43</td>
      <td class="gt_row gt_center">0.2</td>
    </tr>
  </tbody>
  
  <tfoot>
    <tr class="gt_footnotes">
      <td colspan="4">
        <p class="gt_footnote">
          <sup class="gt_footnote_marks">
            <em>1</em>
          </sup>
           
          HR = Hazard Ratio, CI = Confidence Interval
          <br />
        </p>
      </td>
    </tr>
  </tfoot>
</table></div>
</div>
<h2 id="samenvatting">Samenvatting</h2>
<p>We vinden dat acute ent versus gastheer ziekte niet significant geassocieerd is met de dood met behulp van hetzij oriëntatieanalyse of met inzet van een tijdafhankelijke covariate.</p>
<p>Vaak zal men oriëntatieanalyse willen gebruiken voor de visualisatie van een enkel covariaat en Cox regressie met een tijdsafhankelijk covariaat voor univariabele en multivariabele modellering.</p>
<h1 id="part-3-concurrerende-risicos">Part 3: Concurrerende Risico’s</h1>
<h2 id="pakketten-1">Pakketten</h2>
<p>Het belangrijkste pakket om te gebruiken in concurrerende risico analyse is:</p>
<ul>
<li><code>cmprsk</code></li>
</ul>
<div class="layout-chunk" data-layout="l-body">

</div>
<h2 id="wat-zijn-concurrerende-risicos">Wat zijn concurrerende risico’s?</h2>
<p>Hier is sprake van wanneer subjecten meerdere mogelijke gebeurtenissen kennen in een tijd tot gebeurtenissetting.</p>
<p>Voorbeelden:</p>
<ul>
<li>herhaling</li>
<li>sterfte door ziekte</li>
<li>dood door andere oorzaken</li>
<li>behandelingsreactie</li>
</ul>
<p>Al deze of sommige van deze (onder andere) gebeurtenissen kunnen in een bepaalde studie mogelijk zijn.</p>
<h2 id="dus-wat-is-het-probleem">Dus wat is het probleem?</h2>
<p>Onopgemerkte afhankelijkheid tussen de momenten van het evenement is het fundamentele probleem dat leidt tot de noodzaak om speciale aandacht hieraan te besteden.</p>
<p>Men kan zich bijvoorbeeld voorstellen dat patiënten die terugkomen meer kans hebben om te sterven en daarom zouden tijden om terug te keren en tijden om te sterven geen onafhankelijke gebeurtenissen zijn.</p>
<h2 id="achtergronden-van-concurrerende-risicos">Achtergronden van concurrerende risico’s</h2>
<p>Twee benaderingen van de analyse in de aanwezigheid van meerdere potentiële uitkomsten:</p>
<ol type="1">
<li>Oorzaak-specifiek gevaar van een bepaalde gebeurtenis: dit is het percentage per tijdseenheid van de gebeurtenis onder degenen die niet hebben gefaald op andere gebeurtenissen.</li>
<li>Cumulatieve incidentie van een bepaald evenement: dit is het deel per tijdseenheid van het evenement en de invloed van concurrerende evenementen.</li>
</ol>
<p>Elk van deze benaderingen kan slechts één belangrijk aspect van de gegevens belichten, terwijl andere mogelijk worden verdoezeld, en de gekozen aanpak moet afhangen van de kwestie van het belang.</p>
<h2 id="een-aantal-aanvullende-aantekeningen-en-referenties">Een aantal aanvullende aantekeningen en referenties</h2>
<ul>
<li>Wanneer de gebeurtenissen onafhankelijk zijn (bijna nooit waar), zijn de oorzaak-specifieke gevaren onbevooroordeeld.</li>
<li>Wanneer de gebeurtenissen afhankelijk zijn, kunnen afhankelijk van de instelling verschillende resultaten worden verkregen</li>
<li>Cumulatieve incidentie met Kaplan-Meier is altijd &gt;= cumulatieve incidentie met behulp van concurrerende risicomethoden, dus kan alleen leiden tot een overschatting van de cumulatieve incidentie, de hoogte van de overschatting hangt af van het aantal gebeurtenissen en de afhankelijkheid van de gebeurtenissen.</li>
<li>Om vast te stellen dat een covariaat inderdaad reageert op de gebeurtenis dat van belang is, kan de voorkeur worden gegeven aan oorzaken-specifieke gevaren voor de behandeling of voor het testen van het pronostiek-markeereffect.</li>
<li>Om het algemene voordeel vast te stellen, kan de voorkeur worden gegeven aan subdistributierisico’s voor het bouwen van prognostische nomogrammen of het overwegen van gezondheidseconomische effecten om een beter gevoel te krijgen van de invloed van de behandeling en andere covariaten op een absolute schaal.</li>
</ul>
<blockquote>
<p>Dignam JJ, Zhang Q, Kocherginsky M. The use and interpretation of competing risks regression models. Clin Cancer Res. 2012;18(8):2301-8.</p>
</blockquote>
<blockquote>
<p>Kim HT. Cumulative incidence in competing risks data and competing risks regression analysis. Clin Cancer Res. 2007 Jan 15;13(2 Pt 1):559-65.</p>
</blockquote>
<blockquote>
<p>Satagopan JM, Ben-Porat L, Berwick M, Robson M, Kutler D, Auerbach AD. A note on competing risks in survival data analysis. Br J Cancer. 2004;91(7):1229-35.</p>
</blockquote>
<blockquote>
<p>Austin, P., &amp; Fine, J. (2017). Practical recommendations for reporting Fine‐Gray model analyses for competing risk data. Statistics in Medicine, 36(27), 4391-4400.</p>
</blockquote>
<h2 id="cumulatieve-incidentie-voor-concurrerende-risicos">Cumulatieve incidentie voor concurrerende risico’s</h2>
<p>– Niet-parametrische schatting van de cumulatieve incidentie;<br />
- Schat het cumulatieve effect van het evenement van de rente in;<br />
- Op elk moment is de som van de cumulatieve incidentie van elke gebeurtenis gelijk aan de totale cumulatieve incidentie van elke gebeurtenis (niet waar in de oorzaak-specifieke setting);<br />
- Gray’s test is een aangepaste Chi-kwadraat test die wordt gebruikt om 2 of meer groepen te vergelijken.</p>
<h2 id="voorbeeld-melanoma-data-van-het-mass-pakket">Voorbeeld Melanoma data van het MASS pakket</h2>
<p>We gebruiken de <code>Melanoma</code> data van het <code>MASS</code> pakket om deze concepten duidelijk te maken. Deze omvatten de volgende variabelen:</p>
<ul>
<li><code>time</code> overlevingstijd in dagen, mogelijk gecensord.</li>
<li><code>status</code> 1 dood vanwege melanoma, 2 levend, 3 dood vanwege andere oorzaken.</li>
<li><code>sex</code> 1 = man, 0 = vrouw.</li>
<li><code>age</code> leeftijd in jaren.</li>
<li><code>year</code> van de operatie.</li>
<li><code>thickness</code> tumor dikte in mm.</li>
<li><code>ulcer</code> 1 = aanwezig, 0 = afwezig.</li>
</ul>
<div class="layout-chunk" data-layout="l-body">

</div>
<h2 id="cumulatieve-incidentie-in-de-melanoma-data">Cumulatieve incidentie in de Melanoma data</h2>
<p>Schat de cumulatieve incidentie in de context van concurrerende risico’s met gebruik van de <code>cuminc</code> functie.</p>
<p><em>Opgelet</em>: in de <code>Melanoma</code> data, gecensorde patiënten zijn gecodeerd als <span class="math inline">\(2\)</span> voor <code>status</code>, dus we kunnen niet de <code>cencode</code> standaardoptie gebruiken van <span class="math inline">\(0\)</span></p>
<div class="layout-chunk" data-layout="l-body">
<pre><code>
Estimates and Variances:
$est
          1000       2000       3000      4000      5000
1 1 0.12745714 0.23013963 0.30962017 0.3387175 0.3387175
1 3 0.03426709 0.05045644 0.05811143 0.1059471 0.1059471

$var
            1000         2000         3000        4000        5000
1 1 0.0005481186 0.0009001172 0.0013789328 0.001690760 0.001690760
1 3 0.0001628354 0.0002451319 0.0002998642 0.001040155 0.001040155</code></pre>
</div>
<h2 id="plotten-van-de-cumulatieve-incidentie---basis-r">Plotten van de cumulatieve incidentie - basis R</h2>
<p>Genereer een basis <code>R</code> plot met al de standaards.</p>
<div class="layout-chunk" data-layout="l-body">

</div>
<div class="layout-chunk" data-layout="l-body">
<p><img src="survival-analyse-met-r_files/figure-html5/unnamed-chunk-32-1.png" width="480" /></p>
</div>
<p>In de legende:</p>
<ul>
<li>Het eerste getal geeft de groep aan, in dit geval is er slechts een globale schatting, dus het is <span class="math inline">\(1\)</span> voor beide…</li>
<li>Het tweede getal geeft het type gebeurtenis aan, in dit geval is het de ononderbroken lijn <span class="math inline">\(1\)</span> voor de dood door melanoom en de stippellijn <span class="math inline">\(3\)</span> voor de dood door andere oorzaken.</li>
</ul>
<h2 id="zet-de-cumulatieve-incidentie-uit---ggcompetingrisks">Zet de cumulatieve incidentie uit - ggcompetingrisks</h2>
<p>We kunnen ook de cumulatieve incidentie berekenen met behulp van de <code>ggs-competingrisks</code> functie van het <code>survminer</code> pakket.</p>
<p>In dit geval krijgen we een panel gelabeld volgens de groep en een legenda gelabeld evenement, met vermelding van het type evenement voor elke regel.</p>
<p>In the legenda:</p>
<ul>
<li>Het eerste getal geeft de groep aan, in dit geval is er alleen een overall schatte en is <span class="math inline">\(1\)</span> voor beiden;<br />
</li>
<li>Het tweede getal geeft de gebeurtenis type aan, in dit geval is de doorlopende lijn <span class="math inline">\(1\)</span> voor overleden aan melanoma en de stippellijn is <span class="math inline">\(3\)</span> voor overleden vanwege overleden vanwege andere oorzaken.</li>
</ul>
<h2 id="plot-de-cumulatieve-incidentie---ggcompetingrisks">Plot de cumulatieve incidentie - ‘ggcompetingrisks’</h2>
<p>We kunnen de cumulatieve incidentie ook plotten met de <code>ggscompetingrisks</code> functie van het <code>survminer</code> pakket.</p>
<p>In dit geval krijgen we een panel gelabeld volgens de groep en een legenda gelabeld evenement, met vermelding van het type evenement voor elke regel.</p>
<p><em>Opgelet</em></p>
<ul>
<li>Je kunt de optie <code>multiple_panels = FALSE</code> gebruiken om alle groepen op een enkel panel afgedrukt te krijgen;<br />
</li>
<li>anders dan bij <code>R</code> basis gaat de y-as niet standaard naar 1, dus die moet je handmatig aanpassen</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<p><img src="survival-analyse-met-r_files/figure-html5/unnamed-chunk-33-1.png" width="480" /></p>
</div>
<h2 id="vergelijken-van-cumulatieve-incidentie-tussen-groepen">Vergelijken van cumulatieve incidentie tussen groepen</h2>
<p>In <code>cuminc</code> wordt de Gray’s test gebruikt voor tussen-groepen tests.</p>
<p>Als voorbeeld vergelijken we de <code>Melanoma</code> uitkomsten volgens <code>ulcer</code>, de aan- of afwezigheid van ulceratie (zweervorming). De resultaten hiervan vind je in <code>Tests</code>.</p>
<div class="layout-chunk" data-layout="l-body">
<pre><code>
       stat           pv df
1 26.120719 3.207240e-07  1
3  0.158662 6.903913e-01  1</code></pre>
</div>
<h2 id="plotten-van-cumulatieve-incidentie-volgens-groep---ggcompetingrisks">Plotten van cumulatieve incidentie volgens groep - ‘ggcompetingrisks’</h2>
<div class="layout-chunk" data-layout="l-body">
<p><img src="survival-analyse-met-r_files/figure-html5/unnamed-chunk-35-1.png" width="480" /></p>
</div>
<h2 id="plotten-van-cumulatieve-incidentie-per-groep---handmatig">Plotten van cumulatieve incidentie per groep - handmatig</h2>
<p><em>Opgelet</em> Persoonlijk vind ik <code>ggcompetingrisks</code> functie lastig, vooral vergeleken met <code>ggsurvplot</code>. Het plotten doe ik veelal door eerst te zorgen voor een schone dataset van de <code>cuminc</code> fit resultaten en pas daarna de resultaten te plotten. Kijk maar eens naar de broncode hieronder.</p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="survival-analyse-met-r_files/figure-html5/unnamed-chunk-36-1.png" width="480" /></p>
</div>
<h2 id="plotten-van-een-enkele-gebeurtenis-type---handmatig">Plotten van een enkele gebeurtenis type - handmatig</h2>
<p>Vaak is slechts een van de soorten evenementen interessant, hoewel we nog steeds rekenschap willen afleggen van de concurrerende gebeurtenis. In dat geval kan de gebeurtenis van belang alleen worden uitgezet. Nogmaals, ik doe dit handmatig door eerst een nette dataset te maken van de <code>cuminc</code> fit resultaten en dan de resultaten te plotten. Zie hieronder:</p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="survival-analyse-met-r_files/figure-html5/unnamed-chunk-37-1.png" width="480" /></p>
</div>
<h2 id="getallen-toevoegen-aan-de-risicotabel">Getallen toevoegen aan de risicotabel</h2>
<p>Misschien wil je de getallen van de risicotabel toevoegen aan een cumulatieve incidentiegrafiek. Hier weet ik geen eenvoudige manier voor.</p>
<ol type="1">
<li>Maak een grafiek met basis <code>R</code>, <code>ggcompetingrisks</code> of <code>ggplot</code></li>
<li>Haal het getal van de risico tabel van<code>ggsurvplot</code> door <code>survfit</code> te gebruiken waar alle gebeurtenissen tellen als een enkel eindpunt
<ul>
<li>Dwing de assen zodat ze dezelfde limieten, breekpunten en titels hebben;<br />
</li>
<li>Wees er zeker van dat de kleuren/lijntypen matchen met de labels;<br />
</li>
<li>Zorg ervoor dat de lettergrootte steeds hetzelfde is;<br />
</li>
</ul></li>
<li>Combineer dan de grafiek en de risicotabel. Ik gebruik hiervoor de <code>plot_grid</code> functie van het <code>cowplot</code> pakket;
<ul>
<li>Ik weet niet hoe ik de tekstgrootte van “Number at risk” moet veranderen…</li>
</ul></li>
</ol>
<div class="layout-chunk" data-layout="l-body">
<p><img src="survival-analyse-met-r_files/figure-html5/unnamed-chunk-38-1.png" width="480" /></p>
</div>
<h2 id="concurrerende-risico-regressie">Concurrerende risico regressie</h2>
<p>Twee benaderingen:</p>
<ol type="1">
<li>Oorzaak-specifieke gevaren (’hazards)
<ul>
<li>snelheid van het optreden van het gegeven type van gebeurtenis die op dit moment gebeurtenis-vrij zijn</li>
<li>geschat met behulp van Cox regressie (<code>coxph</code> functie)</li>
</ul></li>
<li>Subdistributierisico’s
<ul>
<li>snelheid van het optreden van het gegeven type gebeurtenis bij proefpersonen die nog geen gebeurtenis van dat type hebben meegemaakt</li>
<li>geschat met behulp van Fine-Gray regressie (<code>crr</code> functie)</li>
</ul></li>
</ol>
<h2 id="concurrerende-risico-regressie-in-melanoma-data---subdistributie-hazard-benadering">Concurrerende risico regressie in Melanoma data - subdistributie hazard benadering</h2>
<p>Laten we zeggen dat we geïnteresseerd zijn in het effect van leeftijd en geslacht op de dood door melanoom, met de dood door andere oorzaken als een concurrerende gebeurtenis.</p>
<p>Opmerkingen:</p>
<ul>
<li><code>crr</code> vereist specificatie van covariaten als een matrix</li>
<li>Als er meer dan één gebeurtenis van belang is, kunt u de resultaten voor een andere gebeurtenis opvragen met behulp van de <code>failcode</code> optie, standaard worden de resultaten geretourneerd voor <code>failcode = 1</code>.</li>
</ul>
<p>Let’s say we’re interested in looking at the effect of age and sex on death from melanoma, with death from other causes as a competing event.</p>
<div class="layout-chunk" data-layout="l-body">
<pre><code>
convergence:  TRUE 
coefficients:
    sex     age 
0.58840 0.01259 
standard errors:
[1] 0.271800 0.009301
two-sided p-values:
 sex  age 
0.03 0.18 </code></pre>
</div>
<p>In het vorige voorbeeld werden zowel <code>sex</code> en <code>age</code>gecodeerd als numerieke variabelen. De <code>crr</code> functie kan niet op een natuurlijke manier omgaan met karaktervariabelen en je krijgt een fout. Dus als er karaktervariabelen aanwezig zijn moeten we dummy-variabelen maken met behulp van <code>model.matrix</code>.</p>
<div class="layout-chunk" data-layout="l-body">

</div>
<h2 id="formatteren-van-de-resultaten-van-van-crr">Formatteren van de resultaten van van crr</h2>
<p>Output van <code>crr</code> wordt niet ondersteund door <code>broom::tidy()</code> of noch door <code>gtsummary::tbl_regression()</code> op dit moment. Als alternatief, gebruik de (niet flexibele, maar beter dan niks?) <code>mvcrrres</code> van mijn <code>ezfun</code> pakket</p>
<div class="layout-chunk" data-layout="l-body">
<table>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: left;">HR (95% CI)</th>
<th style="text-align: left;">p-value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">sex</td>
<td style="text-align: left;">1.8 (1.06, 3.07)</td>
<td style="text-align: left;">0.03</td>
</tr>
<tr class="even">
<td style="text-align: left;">age</td>
<td style="text-align: left;">1.01 (0.99, 1.03)</td>
<td style="text-align: left;">0.18</td>
</tr>
</tbody>
</table>
</div>
<h2 id="concurrerende-risicos-regressie-in-de-gegevens-van-melanoom---oorzaak-specifieke-gevarenbenadering">Concurrerende risico’s regressie in de gegevens van Melanoom - oorzaak-specifieke gevarenbenadering</h2>
<p>Censor alle onderwerpen die niet voor de gebeurtenis van belang zijn, in dit geval de dood door melanoom, en gebruik <code>coxph</code> zoals voorheen. Dus patiënten die zijn overleden aan andere oorzaken worden nu gecensord voor de oorzaak-specifieke gevarenbenadering van concurrerende risico’s.</p>
<p>De resultaten kunnen worden geformatteerd met <code>broom::tidy()</code> of <code>gtsummary::tbl_regression()</code>.</p>
<div class="layout-chunk" data-layout="l-body">
<table>
<thead>
<tr class="header">
<th style="text-align: left;">term</th>
<th style="text-align: right;">estimate</th>
<th style="text-align: right;">std.error</th>
<th style="text-align: right;">statistic</th>
<th style="text-align: right;">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">sex</td>
<td style="text-align: right;">1.818949</td>
<td style="text-align: right;">0.2676386</td>
<td style="text-align: right;">2.235323</td>
<td style="text-align: right;">0.0253961</td>
</tr>
<tr class="even">
<td style="text-align: left;">age</td>
<td style="text-align: right;">1.016679</td>
<td style="text-align: right;">0.0086628</td>
<td style="text-align: right;">1.909514</td>
<td style="text-align: right;">0.0561958</td>
</tr>
</tbody>
</table>
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#tjxokapgnw .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#tjxokapgnw .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#tjxokapgnw .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#tjxokapgnw .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#tjxokapgnw .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#tjxokapgnw .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#tjxokapgnw .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#tjxokapgnw .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#tjxokapgnw .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#tjxokapgnw .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#tjxokapgnw .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#tjxokapgnw .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#tjxokapgnw .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#tjxokapgnw .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#tjxokapgnw .gt_from_md > :first-child {
  margin-top: 0;
}

#tjxokapgnw .gt_from_md > :last-child {
  margin-bottom: 0;
}

#tjxokapgnw .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#tjxokapgnw .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#tjxokapgnw .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#tjxokapgnw .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#tjxokapgnw .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#tjxokapgnw .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#tjxokapgnw .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#tjxokapgnw .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#tjxokapgnw .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#tjxokapgnw .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#tjxokapgnw .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#tjxokapgnw .gt_left {
  text-align: left;
}

#tjxokapgnw .gt_center {
  text-align: center;
}

#tjxokapgnw .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#tjxokapgnw .gt_font_normal {
  font-weight: normal;
}

#tjxokapgnw .gt_font_bold {
  font-weight: bold;
}

#tjxokapgnw .gt_font_italic {
  font-style: italic;
}

#tjxokapgnw .gt_super {
  font-size: 65%;
}

#tjxokapgnw .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="tjxokapgnw" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>HR</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>95% CI</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>p-value</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_left">sex</td>
      <td class="gt_row gt_center">1.82</td>
      <td class="gt_row gt_center">1.08, 3.07</td>
      <td class="gt_row gt_center">0.025</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">age</td>
      <td class="gt_row gt_center">1.02</td>
      <td class="gt_row gt_center">1.00, 1.03</td>
      <td class="gt_row gt_center">0.056</td>
    </tr>
  </tbody>
  
  <tfoot>
    <tr class="gt_footnotes">
      <td colspan="4">
        <p class="gt_footnote">
          <sup class="gt_footnote_marks">
            <em>1</em>
          </sup>
           
          HR = Hazard Ratio, CI = Confidence Interval
          <br />
        </p>
      </td>
    </tr>
  </tfoot>
</table></div>
</div>
<h2 id="wat-hebben-we-gedaan">Wat hebben we gedaan?</h2>
<ul>
<li>De basis van de overlevingsanalyse met inbegrip van de Kaplan-Meier overlevingsfunctie en Cox-regressie</li>
<li>Oriëntatieanalyse en tijdsafhankelijke covariaten</li>
<li>Cumulatieve incidentie en regressie voor concurrerende risicoanalyses</li>
</ul>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom"></div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
