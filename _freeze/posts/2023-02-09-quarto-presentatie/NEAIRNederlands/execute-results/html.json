{
  "hash": "cec031c0d1d15e0abd923c9436679de2",
  "result": {
    "markdown": "---\ntitle: \"Stroomlijnen met R\"\nauthor: \"Meghan Hall<br>NEAIR<br>July 12, 2022<br>Harrie Jonkman<br>Februari 9, 2023\"\nbiglogo: workshop.png \nformat: \n  revealjs:\n    footer: \"[github.com/meghall06/neair](https://github.com/meghall06/neair)&nbsp;&nbsp;&nbsp;\"\n    theme: [moon, \"C:/FilesHarrie/Quarto/MeganHall/Quatropresentation/css/customNSCR.scss\"]\n    preview-links: auto\n    chalkboard: \n      boardmarker-width: 5\nfrom: markdown+emoji\nexecute:\n  echo: true\neditor: \n  markdown: \n    wrap: 72\n---\n\n```{=html}\n<style type=\"text/css\">\n.reveal .slide-logo {\n  top: 0;\n  left: 12px;\n  height=\"574\";\n  width=\"499\"\n}\n</style>\n```\n\n\n## Huishoudelijke mededelingen\n\n<br/>\n\n::: incremental\n-   Intro :wave:\n-   Materialen workshop :arrow_down:\n-   Pauze :clock9:\n-   Aan het einde :heavy_check_mark:\n-   Het plan vandaag :clipboard:\n:::\n\n------------------------------------------------------------------------\n\n## Het plan vandaag\n\n<br/>\n\n::: incremental\n1.  Wat is R? Hoe kan het de last van herhaalde rapportering verlichten?\n2.  Basis functies voor het manipuleren van data\n3.  R effectief gebruiken\n4.  Meer datamanipulatie\n5.  Visualiseren van data\n6.  Een piek bij ingewikkelde onderwerpen \n:::\n\n# Wat is R?\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n1 [2 3 4 5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n------------------------------------------------------------------------\n\n## Wat is R?\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n1 [2 3 4 5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n<br> <br> <br> <br>\n\n::: {style=\"text-align: center\"}\nR is een open-source ([**vrij te gebruiken**]{style=\"color:#cc0000\"}!) programmeertaal voor het werken met data\n:::\n\n------------------------------------------------------------------------\n\n## De voordelen van R\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n1 [2 3 4 5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n<br> <br>\n\nMijn persoonlijke Excel nachtmerrie\n\n<br>\n\n. . .\n\nHet magische van R is dat het [**reproduceerbaar**]{style=\"color:#cc0000\"} is\n(door iemand anders *of* jouwzelf later)\n\n<br>\n\n. . .\n\nHou data apart van de code (stappen datavoorbereiding)\n\n------------------------------------------------------------------------\n\n## R binnenhalen\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n1 [2 3 4 5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n<br/> <br/> <br/>\n\nJe hebt de [R-taal](https://cloud.r-project.org/) nodig <br/> <br/>\n\n. . .\n\nEn ook de \n[software](https://www.rstudio.com/products/rstudio/download/#download)\n\n------------------------------------------------------------------------\n\n## Navigeren in RStudio\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n1 [2 3 4 5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n::: {.absolute top=\"10%\" left=\"0\" width=\"1031\" height=\"529\"}\n::: {style=\"text-align: center\"}\n![](RStudio1.png)\n:::\n:::\n\n::: {.absolute top=\"66%\" left=\"55%\"}\n::: {style=\"color: #cc0000\"}\nproject files vind je hier\n:::\n:::\n\n. . .\n\n::: {.absolute top=\"28%\" left=\"70%\"}\n::: {style=\"color: #cc0000\"}\ngeïmporteerde data komen hier\n:::\n:::\n\n. . .\n\n::: {.absolute top=\"50%\" left=\"10%\"}\n::: {style=\"color: #cc0000\"}\ncode *kan* hier komen\n:::\n:::\n\n------------------------------------------------------------------------\n\n## Navigeren in RStudio\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n1 [2 3 4 5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n::: {.absolute top=\"10%\" left=\"0\" width=\"1031\" height=\"529\"}\n::: {style=\"text-align: center\"}\n![](RStudio2.png)\n:::\n:::\n\n::: {.absolute top=\"66%\" left=\"55%\"}\n::: {style=\"color: #cc0000\"}\nproject files komen hier\n:::\n:::\n\n::: {.absolute top=\"28%\" left=\"70%\"}\n::: {style=\"color: #cc0000\"}\ngeïmporteerde data hier\n:::\n:::\n\n::: {.absolute top=\"35%\" left=\"25%\"}\n::: {style=\"color: #cc0000\"}\ncode kan ook<br>hier komen\n:::\n:::\n\n------------------------------------------------------------------------\n\n## Gebruik van R\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n1 [2 3 4 5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n::: columns\n::: {.column width=\"50%\"}\n<br> <br> Je gebruikt R via *pakketten*\n:::\n\n::: fragment\n<br/> ...die *functies* omvatten\n:::\n\n::: fragment\n<br> ...of gewoon *werkwoorden* zijn\n:::\n:::\n\n::: {.column width=\"50%\"}\n::: fragment\n![](tidyverse.png){.absolute top=\"70\" left=\"530\" height=\"574\"\nwidth=\"499\"}\n:::\n:::\n\n------------------------------------------------------------------------\n\n## Data van vandaag\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n1 [2 3 4 5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n\n::: {.cell}\n\n:::\n\n\n::: {style=\"text-align: center\"}\n`faculteit`\n:::\n\n<br>\n\n::: {style=\"font-size: 0.75em\"}\n\n::: {.cell}\n::: {.cell-output-display}\n|year    |   id|rank                |dept1     |dept2       |\n|:-------|----:|:-------------------|:---------|:-----------|\n|2021-22 | 1005|Lecturer            |Chemistry |            |\n|2021-22 | 1022|Professor           |Physics   |Engineering |\n|2021-22 | 1059|Professor           |Physics   |            |\n|2021-22 | 1079|Lecturer            |Music     |            |\n|2021-22 | 1086|Assistant Professor |Music     |            |\n|2021-22 | 1095|Adjunct Instructor  |Sociology |            |\n:::\n:::\n\n:::\n\n------------------------------------------------------------------------\n\n## Data van vandaag\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n1 [2 3 4 5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n::: {style=\"text-align: center\"}\n`cursussen`\n:::\n\n<br>\n\n::: {style=\"font-size: 0.75em\"}\n\n::: {.cell}\n::: {.cell-output-display}\n| semester| course_id| faculty_id|dept              | enrollment|level |\n|--------:|---------:|----------:|:-----------------|----------:|:-----|\n| 20212202|     10605|       1772|Physics           |          7|UG    |\n| 20212202|     10605|       1772|Physics           |         32|GR    |\n| 20212202|     11426|       1820|Political Science |          8|UG    |\n| 20212202|     12048|       1914|English           |         24|UG    |\n| 20212202|     13269|       1095|Sociology         |         48|UG    |\n| 20212202|     13517|       1086|Music             |         17|UG    |\n:::\n:::\n\n:::\n\n# Basis datamanipulatie\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1]{style=\"opacity:0.25\"} 2 [3 4 5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n------------------------------------------------------------------------\n\n## Bruikbare operaties\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1]{style=\"opacity:0.25\"} 2 [3 4 5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n<br> <br>\n\n::: columns\n::: {.column width=\"15%\"}\n::: {style=\"font-size: 1.75em; text-align: center\"}\n`<-`\n:::\n:::\n\n::: {.column width=\"30%\"}\n::: {style=\"font-size: 1.5em; text-align: center\"}\n\"opslaan als\"\n:::\n:::\n\n::: {.column width=\"55%\"}\n::: {style=\"font-size: 1.5em\"}\n`opt + -`\n:::\n:::\n:::\n\n. . .\n\n::: columns\n::: {.column width=\"15%\"}\n::: {style=\"font-size: 1.75em; text-align: center\"}\n`%>%`\n:::\n:::\n\n::: {.column width=\"30%\"}\n::: {style=\"font-size: 1.5em; text-align: center\"}\n\"en dan\"\n:::\n:::\n\n::: {.column width=\"55%\"}\n::: {style=\"font-size: 1.5em\"}\n`Cmd + shift + m`\n:::\n:::\n:::\n\n------------------------------------------------------------------------\n\n## Algemene functies\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1]{style=\"opacity:0.25\"} 2 [3 4 5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n<br>\n\n::: {.fragment .semi-fade-out}\n`filter` rijen houden of laten verdwijnen (observaties)\n\n`select` kolommen houden of laten verdwijnen (variabelen)\n\n`arrange` sorteren van data op basis van bepaalde variabele(n)\n\n`count` telt data op basis van bepaalde variabele(n)\n\n`mutate` creëert nieuwe variabelen\n\n`group_by`/`summarize` aggregeert data ([pivot\ntables]{style=\"color:#cc0000\"}!)\n\n`str_*` functies werken makkelijk met tekst \n:::\n\n------------------------------------------------------------------------\n\n## Syntax of een functie\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1]{style=\"opacity:0.25\"} 2 [3 4 5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n<br>\n\n<br>\n\n`function(data, argument(s))`\n\n<br>\n\n. . .\n\nis hetzelfde als\n\n<br>\n\n`data %>%`\n\n    `function(argument(s))`\n\n------------------------------------------------------------------------\n\n## Filter\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1]{style=\"opacity:0.25\"} 2 [3 4 5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n<br>\n\n`filter` houdt of doet rijen verdwijnen (observaties)\n\nde `==` operator zorgt voor gelijkheid\n\n<br>\n\n::: columns\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nfaculty %>% \n  filter(dept1 == \"Sociology\")\n```\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n::: fragment\n::: {style=\"font-size: 0.45em\"}\n\n::: {.cell}\n::: {.cell-output-display}\n|year    |   id|rank                |dept1     |dept2            |\n|:-------|----:|:-------------------|:---------|:----------------|\n|2021-22 | 1095|Adjunct Instructor  |Sociology |                 |\n|2021-22 | 1118|Assistant Professor |Sociology |                 |\n|2021-22 | 1161|Assistant Professor |Sociology |                 |\n|2021-22 | 1191|Professor           |Sociology |                 |\n|2021-22 | 1216|Associate Professor |Sociology |American Studies |\n|2021-22 | 1273|Assistant Professor |Sociology |                 |\n:::\n:::\n\n:::\n:::\n:::\n:::\n\n------------------------------------------------------------------------\n\n## Filter\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1]{style=\"opacity:0.25\"} 2 [3 4 5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n<br>\n\nde `|` operator betekent \"of\"\n\n<br>\n\n::: columns\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nfaculty %>% \n  filter(dept1 == \"Sociology\" | \n           dept1 == \"Physics\")\n```\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n::: fragment\n::: {style=\"font-size: 0.45em\"}\n\n::: {.cell}\n::: {.cell-output-display}\n|year    |   id|rank                |dept1     |dept2       |\n|:-------|----:|:-------------------|:---------|:-----------|\n|2021-22 | 1022|Professor           |Physics   |Engineering |\n|2021-22 | 1059|Professor           |Physics   |            |\n|2021-22 | 1095|Adjunct Instructor  |Sociology |            |\n|2021-22 | 1118|Assistant Professor |Sociology |            |\n|2021-22 | 1161|Assistant Professor |Sociology |            |\n|2021-22 | 1191|Professor           |Sociology |            |\n:::\n:::\n\n:::\n:::\n:::\n:::\n\n------------------------------------------------------------------------\n\n## Filter\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1]{style=\"opacity:0.25\"} 2 [3 4 5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n<br>\n\nde `%in%` operator is toegestaan voor verschillende opties in een list\n\n<br>\n\n::: columns\n::: {.column width=\"51%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nfaculty %>% \n  filter(dept1 %in% c(\"Sociology\",\n                      \"Physics\",\n                      \"Music\"))\n```\n:::\n\n:::\n\n::: {.column width=\"49%\"}\n::: fragment\n::: {style=\"font-size: 0.45em\"}\n\n::: {.cell}\n::: {.cell-output-display}\n|year    |   id|rank                |dept1     |dept2       |\n|:-------|----:|:-------------------|:---------|:-----------|\n|2021-22 | 1022|Professor           |Physics   |Engineering |\n|2021-22 | 1059|Professor           |Physics   |            |\n|2021-22 | 1079|Lecturer            |Music     |            |\n|2021-22 | 1086|Assistant Professor |Music     |            |\n|2021-22 | 1095|Adjunct Instructor  |Sociology |            |\n|2021-22 | 1118|Assistant Professor |Sociology |            |\n:::\n:::\n\n:::\n:::\n:::\n:::\n\n------------------------------------------------------------------------\n\n## Filter\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1]{style=\"opacity:0.25\"} 2 [3 4 5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n<br>\n\nde `&` operator combineert voorwaarden\n\n<br>\n\n::: columns\n::: {.column width=\"51%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nfaculty %>% \n  filter(dept1 %in% c(\"Sociology\",\n                      \"Physics\",\n                      \"Music\") &\n         rank == \"Professor\")\n```\n:::\n\n:::\n\n::: {.column width=\"49%\"}\n::: fragment\n::: {style=\"font-size: 0.45em\"}\n\n::: {.cell}\n::: {.cell-output-display}\n|year    |   id|rank      |dept1     |dept2       |\n|:-------|----:|:---------|:---------|:-----------|\n|2021-22 | 1022|Professor |Physics   |Engineering |\n|2021-22 | 1059|Professor |Physics   |            |\n|2021-22 | 1191|Professor |Sociology |            |\n|2021-22 | 1201|Professor |Physics   |            |\n|2021-22 | 1209|Professor |Music     |            |\n|2021-22 | 1421|Professor |Physics   |Engineering |\n:::\n:::\n\n:::\n:::\n:::\n:::\n\n------------------------------------------------------------------------\n\n## Select\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1]{style=\"opacity:0.25\"} 2 [3 4 5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n<br>\n\n`select` houdt of doet kolommen verdwijnen (variabelen)\n\n<br>\n\n::: columns\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nfaculty %>% \n  select(id, dept1, rank)\n```\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n::: fragment\n::: {style=\"font-size: 0.45em\"}\n\n::: {.cell}\n::: {.cell-output-display}\n|   id|dept1     |rank                |\n|----:|:---------|:-------------------|\n| 1005|Chemistry |Lecturer            |\n| 1022|Physics   |Professor           |\n| 1059|Physics   |Professor           |\n| 1079|Music     |Lecturer            |\n| 1086|Music     |Assistant Professor |\n| 1095|Sociology |Adjunct Instructor  |\n:::\n:::\n\n:::\n:::\n:::\n:::\n\n------------------------------------------------------------------------\n\n## Select\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1]{style=\"opacity:0.25\"} 2 [3 4 5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n<br>\n\nkan kolommen weggooien met -`column`\n\n<br>\n\n::: columns\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nfaculty %>% \n  select(-dept2)\n```\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n::: fragment\n::: {style=\"font-size: 0.45em\"}\n\n::: {.cell}\n::: {.cell-output-display}\n|year    |   id|rank                |dept1     |\n|:-------|----:|:-------------------|:---------|\n|2021-22 | 1005|Lecturer            |Chemistry |\n|2021-22 | 1022|Professor           |Physics   |\n|2021-22 | 1059|Professor           |Physics   |\n|2021-22 | 1079|Lecturer            |Music     |\n|2021-22 | 1086|Assistant Professor |Music     |\n|2021-22 | 1095|Adjunct Instructor  |Sociology |\n:::\n:::\n\n:::\n:::\n:::\n:::\n\n------------------------------------------------------------------------\n\n## Select\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1]{style=\"opacity:0.25\"} 2 [3 4 5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n<br>\n\nde pipe `%>%` verandert verschillende functies in een keer\n\n<br>\n\n::: columns\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nfaculty %>% \n  select(id, dept1, rank) %>% \n  filter(rank == \"Professor\")\n```\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n::: fragment\n::: {style=\"font-size: 0.45em\"}\n\n::: {.cell}\n::: {.cell-output-display}\n|   id|dept1     |rank      |\n|----:|:---------|:---------|\n| 1022|Physics   |Professor |\n| 1059|Physics   |Professor |\n| 1191|Sociology |Professor |\n| 1201|Physics   |Professor |\n| 1209|Music     |Professor |\n| 1407|English   |Professor |\n:::\n:::\n\n:::\n:::\n:::\n:::\n\n------------------------------------------------------------------------\n\n## Arrange\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1]{style=\"opacity:0.25\"} 2 [3 4 5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n<br>\n\n`arrange` sorteert dataset op basis van bepaalde variabele(n)\n\ngebruik `desc()` om volgorden te laten aflopen\n\n<br>\n\n::: columns\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\ncourses %>% \n  arrange(desc(enrollment))\n```\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n::: fragment\n::: {style=\"font-size: 0.45em\"}\n\n::: {.cell}\n::: {.cell-output-display}\n| semester| course_id| faculty_id|dept              | enrollment|level |\n|--------:|---------:|----------:|:-----------------|----------:|:-----|\n| 20212201|     10511|       1005|Chemistry         |         50|UG    |\n| 20212201|     15934|       1421|Physics           |         50|UG    |\n| 20192002|     13850|       1105|Chemistry         |         50|UG    |\n| 20181901|     17773|       1942|Music             |         50|UG    |\n| 20212202|     13269|       1095|Sociology         |         48|UG    |\n| 20202101|     16202|       1816|Political Science |         48|UG    |\n:::\n:::\n\n:::\n:::\n:::\n:::\n\n------------------------------------------------------------------------\n\n## Arrange\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1]{style=\"opacity:0.25\"} 2 [3 4 5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n<br>\n\nkan sorteren op basis van verschillende variabelen\n\n<br>\n\n::: columns\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\ncourses %>% \n  arrange(dept, desc(enrollment))\n```\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n::: fragment\n::: {style=\"font-size: 0.45em\"}\n\n::: {.cell}\n::: {.cell-output-display}\n| semester| course_id| faculty_id|dept      | enrollment|level |\n|--------:|---------:|----------:|:---------|----------:|:-----|\n| 20212201|     10511|       1005|Chemistry |         50|UG    |\n| 20192002|     13850|       1105|Chemistry |         50|UG    |\n| 20202102|     13850|       1258|Chemistry |         39|UG    |\n| 20202102|     16606|       1393|Chemistry |         38|UG    |\n| 20202101|     16540|       1784|Chemistry |         38|UG    |\n| 20181901|     10511|       1829|Chemistry |         36|UG    |\n:::\n:::\n\n:::\n:::\n:::\n:::\n\n------------------------------------------------------------------------\n\n## Count\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1]{style=\"opacity:0.25\"} 2 [3 4 5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n<br>\n\n`count` telt dataset op basis van bepaalde variabele(n)  (heel handig om de data te leren kennen)\n\n<br>\n\n::: columns\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\ncourses %>% \n  count(dept)\n```\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n::: fragment\n::: {style=\"font-size: 0.45em\"}\n\n::: {.cell}\n::: {.cell-output-display}\n|dept              |  n|\n|:-----------------|--:|\n|Chemistry         | 16|\n|English           | 18|\n|Music             | 17|\n|Physics           | 19|\n|Political Science | 17|\n|Sociology         | 17|\n:::\n:::\n\n:::\n:::\n:::\n:::\n\n------------------------------------------------------------------------\n\n## Count\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1]{style=\"opacity:0.25\"} 2 [3 4 5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n<br>\n\nkan `sort = TRUE` gebruiken om resultaten te ordenen\n\n<br>\n\n::: columns\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\ncourses %>% \n  count(dept, level, sort = TRUE)\n```\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n::: fragment\n::: {style=\"font-size: 0.45em\"}\n\n::: {.cell}\n::: {.cell-output-display}\n|dept              |level |  n|\n|:-----------------|:-----|--:|\n|Chemistry         |UG    | 16|\n|English           |UG    | 16|\n|Music             |UG    | 16|\n|Physics           |UG    | 16|\n|Political Science |UG    | 16|\n|Sociology         |UG    | 16|\n|Physics           |GR    |  3|\n|English           |GR    |  2|\n|Music             |GR    |  1|\n|Political Science |GR    |  1|\n|Sociology         |GR    |  1|\n:::\n:::\n\n:::\n:::\n:::\n:::\n\n------------------------------------------------------------------------\n\n## Mutate\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1]{style=\"opacity:0.25\"} 2 [3 4 5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n<br>\n\n`mutate` creëert nieuwe variabelen (met een `=`)\n\n<br>\n\n::: columns\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nfaculty %>% \n  mutate(new = \"hello!\")\n```\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n::: fragment\n::: {style=\"font-size: 0.45em\"}\n\n::: {.cell}\n::: {.cell-output-display}\n|year    |   id|rank                |dept1     |dept2       |new    |\n|:-------|----:|:-------------------|:---------|:-----------|:------|\n|2021-22 | 1005|Lecturer            |Chemistry |            |hello! |\n|2021-22 | 1022|Professor           |Physics   |Engineering |hello! |\n|2021-22 | 1059|Professor           |Physics   |            |hello! |\n|2021-22 | 1079|Lecturer            |Music     |            |hello! |\n|2021-22 | 1086|Assistant Professor |Music     |            |hello! |\n|2021-22 | 1095|Adjunct Instructor  |Sociology |            |hello! |\n:::\n:::\n\n:::\n:::\n:::\n:::\n\n------------------------------------------------------------------------\n\n## Mutate\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1]{style=\"opacity:0.25\"} 2 [3 4 5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n<br>\n\nveel handiger met een conditionele zoals `ifelse()`, die drie argumenten heeft:\n\nvoorwaarde, als het waar is, als het niet waar is\n\n<br>\n\n::: columns\n::: {.column width=\"70%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nfaculty %>% \n  mutate(prof = ifelse(rank == \"Professor\",\n                       1, 0)) %>% \n  select(rank, prof)\n```\n:::\n\n:::\n\n::: {.column width=\"30%\"}\n::: fragment\n::: {style=\"font-size: 0.45em\"}\n\n::: {.cell}\n::: {.cell-output-display}\n|rank                | prof|\n|:-------------------|----:|\n|Lecturer            |    0|\n|Professor           |    1|\n|Professor           |    1|\n|Lecturer            |    0|\n|Assistant Professor |    0|\n|Adjunct Instructor  |    0|\n:::\n:::\n\n:::\n:::\n:::\n:::\n\n------------------------------------------------------------------------\n\n## Mutate\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1]{style=\"opacity:0.25\"} 2 [3 4 5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n<br>\n\nde `!` operator betekent *niet*\n\n`is.na()` identificeert lege waarden\n\n<br>\n\n::: columns\n::: {.column width=\"60%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nfaculty %>% \n  mutate(joint = ifelse(!is.na(dept2),\n                        \"joint\", NA)) %>% \n  select(dept1, dept2, joint)\n```\n:::\n\n:::\n\n::: {.column width=\"40%\"}\n::: fragment\n::: {style=\"font-size: 0.45em\"}\n\n::: {.cell}\n::: {.cell-output-display}\n|dept1     |dept2       |joint |\n|:---------|:-----------|:-----|\n|Chemistry |            |      |\n|Physics   |Engineering |joint |\n|Physics   |            |      |\n|Music     |            |      |\n|Music     |            |      |\n|Sociology |            |      |\n:::\n:::\n\n:::\n:::\n:::\n:::\n\n------------------------------------------------------------------------\n\n## Mutate\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1]{style=\"opacity:0.25\"} 2 [3 4 5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n<br>\n\nmet verschillende voorwaarden is `case_when()` veel handiger!\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfaculty %>% \n  mutate(division = case_when(dept1 %in% c(\"Sociology\",\"Political Science\") ~\n                                \"Social Sciences\",\n                              dept1 %in% c(\"Music\",\"English\") ~\n                                \"Humanities\",\n                              dept1 %in% c(\"Chemistry\",\"Physics\") ~\n                                \"Sciences\")) %>% \n  select(dept1, division)\n```\n:::\n\n\n::: fragment\n::: {style=\"font-size: 0.45em\"}\n\n::: {.cell}\n::: {.cell-output-display}\n|dept1     |division        |\n|:---------|:---------------|\n|Chemistry |Sciences        |\n|Physics   |Sciences        |\n|Physics   |Sciences        |\n|Music     |Humanities      |\n|Music     |Humanities      |\n|Sociology |Social Sciences |\n:::\n:::\n\n:::\n:::\n\n------------------------------------------------------------------------\n\n## Group by / summarize\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1]{style=\"opacity:0.25\"} 2 [3 4 5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n<br>\n\n`group_by`/`summarize` aggregeert data ([pivot\ntables]{style=\"color:#cc0000\"}!)\n\n`group_by()` identificeert de groepvariabele(n) en `summarize()`\nspecificeert de aggregatie\n\n<br>\n\n::: columns\n::: {.column width=\"60%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\ncourses %>% \n  group_by(dept, semester) %>% \n  summarize(enr = sum(enrollment))\n```\n:::\n\n:::\n\n::: {.column width=\"40%\"}\n::: fragment\n::: {style=\"font-size: 0.45em\"}\n\n::: {.cell}\n::: {.cell-output-display}\n|dept      | semester| enr|\n|:---------|--------:|---:|\n|Chemistry | 20181901|  59|\n|Chemistry | 20181902|  44|\n|Chemistry | 20192001|  47|\n|Chemistry | 20192002|  68|\n|Chemistry | 20202101|  69|\n|Chemistry | 20202102|  77|\n:::\n:::\n\n:::\n:::\n:::\n:::\n\n------------------------------------------------------------------------\n\n## Group by / summarize\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1]{style=\"opacity:0.25\"} 2 [3 4 5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n<br>\n\nbruikbare argumenten met `summarize`:\n\n`mean`, `median`, `sd`, `min`, `max`, `n`\n\n<br>\n\n::: columns\n::: {.column width=\"67%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\ncourses %>% \n  group_by(dept, semester) %>% \n  summarize(enr = sum(enrollment),\n            count = n_distinct(course_id))\n```\n:::\n\n:::\n\n::: {.column width=\"33%\"}\n::: fragment\n::: {style=\"font-size: 0.45em\"}\n\n::: {.cell}\n::: {.cell-output-display}\n|dept      | semester| enr| courses|\n|:---------|--------:|---:|-------:|\n|Chemistry | 20181901|  59|       2|\n|Chemistry | 20181902|  44|       2|\n|Chemistry | 20192001|  47|       2|\n|Chemistry | 20192002|  68|       2|\n|Chemistry | 20202101|  69|       2|\n|Chemistry | 20202102|  77|       2|\n:::\n:::\n\n:::\n:::\n:::\n:::\n\n# Gebruik R effectief\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1 2]{style=\"opacity:0.25\"} 3 [4 5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n------------------------------------------------------------------------\n\n## Werken in RStudio\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1 2]{style=\"opacity:0.25\"} 3 [4 5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n::: {.absolute top=\"10%\" left=\"0\" width=\"1031\" height=\"529\"}\n::: {style=\"text-align: center\"}\n![](RStudio2.png)\n:::\n:::\n\n::: {.absolute top=\"66%\" left=\"55%\"}\n::: {style=\"color: #cc0000\"}\nprojectfiles komen hier\n:::\n:::\n\n::: {.absolute top=\"28%\" left=\"70%\"}\n::: {style=\"color: #cc0000\"}\ngeïmporteerde data komen hier\n:::\n:::\n\n::: {.absolute top=\"35%\" left=\"25%\"}\n::: {style=\"color: #cc0000\"}\ncode kan ook<br>hier komen\n:::\n:::\n\n------------------------------------------------------------------------\n\n## Werken in RStudio\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1 2]{style=\"opacity:0.25\"} 3 [4 5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n::: columns\n::: {.column width=\"50%\"}\n**In de console typen**\n\n-   Het is zoiets als een post-it: makkelijk voor snelle handelingen maar voor eenmalig gebruik \n\n-   acties worden doorgevoerd maar de code niet\n\n-   maar een codechunck is een handeling per keer (`Return`)\n:::\n\n::: {.column width=\"50%\"}\n::: fragment\n**In een codefile typen**\n\n-   scriptfiles hebben een `.R` extensie\n\n-   code wordt bewaard en onderdelen van welke lengte ook kunnen opnieuw gerund worden (`Cmd + Return`)\n\n-   doe \\~95% van jouw typen in een codefile in plaats van in de console!\n:::\n:::\n:::\n\n------------------------------------------------------------------------\n\n## Werken met pakketten\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1 2]{style=\"opacity:0.25\"} 3 [4 5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\npakketten moeten geïnstalleerd zijn op ieder computer die je gebruikt \n\n\n::: {.cell}\n\n```{.r .cell-code}\n# doe dit één keer (per computer)\n# install.packages(\"tidyverse\")\n```\n:::\n\n\n<br>\n\n::: fragment\npakketten moeten geladen worden met `library()` aan het begin van elke sessie\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# zet de pakketten altijd bovenaan de codefile\nlibrary(tidyverse)\n```\n:::\n\n:::\n\n<br>\n\n::: fragment\nkrijg toegang tot helpfiles door `??tidyverse` of `??mutate` in de console in te typen\n:::\n\n------------------------------------------------------------------------\n\n## Organiseren met projecten\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1 2]{style=\"opacity:0.25\"} 3 [4 5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n<br>\n\n[**sterk**]{style=\"color: #cc0000\"} aanbevolen om  *projects* te gebruiken om georganiseerd te blijven \n\n<br>\n\nhou codefiles en datafiles bij elkaar voor betere filepad-navigatie en voor betere reproduceerbare werkgewoonten\n\n. . .\n\n<br>\n\n`File -> New Project`\n\n<br>\n\nmeer onderbouwing vind je:\n[hier](https://support.rstudio.com/hc/en-us/articles/200526207-Using-RStudio-Projects)\nen\n[hier](https://r4ds.had.co.nz/workflow-projects.html#rstudio-projects)\n\n------------------------------------------------------------------------\n\n## Organiseren met projecten\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1 2]{style=\"opacity:0.25\"} 3 [4 5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n::: {.absolute top=\"10%\" left=\"0\" width=\"1031\" height=\"529\"}\n::: {style=\"text-align: center\"}\n![](RStudio2.png)\n:::\n:::\n\n::: {.absolute top=\"66%\" left=\"55%\"}\n::: {style=\"color: #cc0000\"}\nprojectfiles komen hier\n:::\n:::\n\n::: {.absolute top=\"28%\" left=\"70%\"}\n::: {style=\"color: #cc0000\"}\ngeïmporteerde data verschijnen hier \n:::\n:::\n\n::: {.absolute top=\"35%\" left=\"25%\"}\n::: {style=\"color: #cc0000\"}\ncode kan ook<br>hier komen\n:::\n:::\n\n------------------------------------------------------------------------\n\n## Toegang tot workshopmaterialen\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1 2]{style=\"opacity:0.25\"} 3 [4 5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n::: {.absolute top=\"40%\" left=\"0\"}\n::: {style=\"text-align: center\"}\n![](GitHub.png)\n:::\n:::\n\n<br>\n\nKlik op de groene Codeknop en selecteer \"Download ZIP\", en open\n`neair.Rproj`\n\n------------------------------------------------------------------------\n\n## Toegang data\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1 2]{style=\"opacity:0.25\"} 3 [4 5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\ngebruik `read_csv()` om een csv-file te importeren\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# de filepad is zo simpel als je projecten gebruikt!\n# ?read_csv() in de console geeft je de helpfile met meer opties\nfaculty <- read_csv(\"faculty.csv\")\n```\n:::\n\n\n<br>\n\n::: fragment\nhet [readxl](https://readxl.tidyverse.org/) pakket is behulpzaam voor Excelfiles\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# needs to be loaded but not installed as it's part of the tidyverse\nlibrary(readxl)\nfaculty <- read_excel(\"faculty.xlsx\", sheet = 2)\n```\n:::\n\n:::\n\n<br>\n\n::: fragment\nBekijk de data met `View(faculty)` of klik op de datanaam in het Environment paneel\n:::\n\n# Meer datamanipulatie\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1 2 3]{style=\"opacity:0.25\"} 4 [5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n------------------------------------------------------------------------\n\n## Stringr functies\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1 2 3]{style=\"opacity:0.25\"} 4 [5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n<br>\n\nfunctions van `stringr` (die allemaal beginnen met `str_`) zijn behulpzaam als je met tekstdata werkt\n\n::: columns\n::: {.column width=\"58%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nfaculty %>% \n  filter(str_detect(rank, \"Professor\"))\n```\n:::\n\n:::\n\n::: {.column width=\"42%\"}\n::: fragment\n::: {style=\"font-size: 0.45em\"}\n\n::: {.cell}\n::: {.cell-output-display}\n|year    |   id|rank                |dept1             |dept2       |\n|:-------|----:|:-------------------|:-----------------|:-----------|\n|2021-22 | 1022|Professor           |Physics           |Engineering |\n|2021-22 | 1059|Professor           |Physics           |            |\n|2021-22 | 1086|Assistant Professor |Music             |            |\n|2021-22 | 1118|Assistant Professor |Sociology         |            |\n|2021-22 | 1158|Assistant Professor |Political Science |            |\n|2021-22 | 1161|Assistant Professor |Sociology         |            |\n:::\n:::\n\n:::\n:::\n:::\n:::\n\n------------------------------------------------------------------------\n\n## Stringr functies\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1 2 3]{style=\"opacity:0.25\"} 4 [5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n<br>\n\ncheatsheet met functies hiervan vind je \n[hier](https://github.com/rstudio/cheatsheets/blob/main/strings.pdf)\n\n<br>\n\n::: columns\n::: {.column width=\"75%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\ncourses %>% \n  mutate(year = str_c(str_sub(semester, 1, 4), \n                      \"-\",\n                      str_sub(semester, 5, 6))) %>% \n  select(semester, year) %>% \n  unique()\n```\n:::\n\n:::\n\n::: {.column width=\"25%\"}\n::: fragment\n::: {style=\"font-size: 0.45em\"}\n\n::: {.cell}\n::: {.cell-output-display}\n| semester|year    |\n|--------:|:-------|\n| 20212202|2021-22 |\n| 20212201|2021-22 |\n| 20202102|2020-21 |\n| 20202101|2020-21 |\n| 20192002|2019-20 |\n| 20192001|2019-20 |\n| 20181902|2018-19 |\n| 20181901|2018-19 |\n:::\n:::\n\n:::\n:::\n:::\n:::\n\n------------------------------------------------------------------------\n\n## Omdraaien van data\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1 2 3]{style=\"opacity:0.25\"} 4 [5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\nde `faculteit` data hebben een rij per departement, sommige met meerdere departementen (vaak bekend als *wijde* data)\n\n<br>\n\n::: {style=\"font-size: 0.75em\"}\n\n::: {.cell}\n::: {.cell-output-display}\n|year    |   id|rank                |dept1     |dept2       |\n|:-------|----:|:-------------------|:---------|:-----------|\n|2021-22 | 1005|Lecturer            |Chemistry |            |\n|2021-22 | 1022|Professor           |Physics   |Engineering |\n|2021-22 | 1059|Professor           |Physics   |            |\n|2021-22 | 1079|Lecturer            |Music     |            |\n|2021-22 | 1086|Assistant Professor |Music     |            |\n|2021-22 | 1095|Adjunct Instructor  |Sociology |            |\n:::\n:::\n\n:::\n\n------------------------------------------------------------------------\n\n## Omdraaien van data\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1 2 3]{style=\"opacity:0.25\"} 4 [5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\nwat als je één rij per faculteit *per department* wilt?\n(vaak bekend als *lange* data)\n\n<br>\n\n::: {style=\"font-size: 0.75em\"}\n\n::: {.cell}\n::: {.cell-output-display}\n|year    |   id|rank                |dept_no |dept        |\n|:-------|----:|:-------------------|:-------|:-----------|\n|2021-22 | 1005|Lecturer            |dept1   |Chemistry   |\n|2021-22 | 1022|Professor           |dept1   |Physics     |\n|2021-22 | 1022|Professor           |dept2   |Engineering |\n|2021-22 | 1059|Professor           |dept1   |Physics     |\n|2021-22 | 1079|Lecturer            |dept1   |Music       |\n|2021-22 | 1086|Assistant Professor |dept1   |Music       |\n:::\n:::\n\n:::\n\n------------------------------------------------------------------------\n\n## Omdraaien van data\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1 2 3]{style=\"opacity:0.25\"} 4 [5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n<br>\n\nde `pivot_longer` functie verlengt data\n\n<br>\n\n::: columns\n::: {.column width=\"66%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nfaculty %>% \n  pivot_longer(dept1:dept2,\n               names_to = \"dept_no\",\n               values_to = \"dept\",\n               values_drop_na = TRUE) %>% \n  select(-year, -rank)\n```\n:::\n\n:::\n\n::: {.column width=\"34%\"}\n::: fragment\n::: {style=\"font-size: 0.45em\"}\n\n::: {.cell}\n::: {.cell-output-display}\n|   id|dept_no |dept        |\n|----:|:-------|:-----------|\n| 1005|dept1   |Chemistry   |\n| 1022|dept1   |Physics     |\n| 1022|dept2   |Engineering |\n| 1059|dept1   |Physics     |\n| 1079|dept1   |Music       |\n| 1086|dept1   |Music       |\n:::\n:::\n\n:::\n:::\n:::\n:::\n\n------------------------------------------------------------------------\n\n## Omdraaien van data\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1 2 3]{style=\"opacity:0.25\"} 4 [5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n<br>\n\nen `pivot_wider` werkt in tegengestelde richting!\n\n::: {style=\"font-size: 0.45em\"}\n\n::: {.cell}\n::: {.cell-output-display}\n| semester| course_id| faculty_id|dept    | enrollment|level |\n|--------:|---------:|----------:|:-------|----------:|:-----|\n| 20212202|     10605|       1772|Physics |          7|UG    |\n| 20212202|     10605|       1772|Physics |         32|GR    |\n:::\n:::\n\n:::\n\n. . .\n\n<br>\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncourses %>% \n  pivot_wider(names_from = \"level\",\n              values_from = \"enrollment\")\n```\n:::\n\n\n::: {style=\"font-size: 0.45em\"}\n\n::: {.cell}\n::: {.cell-output-display}\n| semester| course_id| faculty_id|dept              | UG| GR|\n|--------:|---------:|----------:|:-----------------|--:|--:|\n| 20212202|     10605|       1772|Physics           |  7| 32|\n| 20212202|     11426|       1820|Political Science |  8|   |\n| 20212202|     12048|       1914|English           | 24|   |\n| 20212202|     13269|       1095|Sociology         | 48|   |\n:::\n:::\n\n:::\n\n------------------------------------------------------------------------\n\n## Data laten aansluiten\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1 2 3]{style=\"opacity:0.25\"} 4 [5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n<br>\n\nR heeft handige functies voor het omgaan met [relationele\ndata]{style=\"color: #cc0000\"}\n\n<br>\n\nalles wat je nodig hebt is een [key variable]{style=\"color: #cc0000\"} die datasets met elkaar verbindt\n\n<br>\n\n`left_join` is het meest algemeen, maar er zijn er\n[meer](https://r4ds.had.co.nz/relational-data.html)\n\n------------------------------------------------------------------------\n\n## Data laten aansluiten\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1 2 3]{style=\"opacity:0.25\"} 4 [5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\nwat is de gemiddelde `UG enrollment per year` per faculteits rang?\n\n. . .\n\n::: {style=\"text-align: center\"}\n`faculty`\n:::\n\n::: {style=\"font-size: 0.45em\"}\n\n::: {.cell}\n::: {.cell-output-display}\n|year    |   id|rank      |dept1     |dept2       |\n|:-------|----:|:---------|:---------|:-----------|\n|2021-22 | 1005|Lecturer  |Chemistry |            |\n|2021-22 | 1022|Professor |Physics   |Engineering |\n|2021-22 | 1059|Professor |Physics   |            |\n|2021-22 | 1079|Lecturer  |Music     |            |\n:::\n:::\n\n:::\n\n::: {style=\"text-align: center\"}\n`courses`\n:::\n\n::: {style=\"font-size: 0.45em\"}\n\n::: {.cell}\n::: {.cell-output-display}\n| semester| course_id| faculty_id|dept              | enrollment|level |\n|--------:|---------:|----------:|:-----------------|----------:|:-----|\n| 20212202|     10605|       1772|Physics           |          7|UG    |\n| 20212202|     10605|       1772|Physics           |         32|GR    |\n| 20212202|     11426|       1820|Political Science |          8|UG    |\n| 20212202|     12048|       1914|English           |         24|UG    |\n:::\n:::\n\n:::\n\n. . .\n\n::: {style=\"text-align: center\"}\n`faculty$id` is hetzelfde als `courses$faculty_id`\n:::\n\n------------------------------------------------------------------------\n\n## Data laten aansluiten\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1 2 3]{style=\"opacity:0.25\"} 4 [5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n<br>\n\nwat is de gemiddelde [UG enrollment per year, per\nfaculty]{style=\"color: #cc0000\"} rang?\n\n<br>\n\n::: {style=\"font-size: 0.45em\"}\n\n::: {.cell}\n::: {.cell-output-display}\n| semester| course_id| faculty_id|dept              | enrollment|level |\n|--------:|---------:|----------:|:-----------------|----------:|:-----|\n| 20212202|     10605|       1772|Physics           |          7|UG    |\n| 20212202|     10605|       1772|Physics           |         32|GR    |\n| 20212202|     11426|       1820|Political Science |          8|UG    |\n| 20212202|     12048|       1914|English           |         24|UG    |\n| 20212202|     13269|       1095|Sociology         |         48|UG    |\n:::\n:::\n\n:::\n\n. . .\n\n-   filter uit `UG` cursussen alleen\n-   creëer onze `year` variabele opnieuw\n-   vat `enrollment` per `year` en `faculty_id` samen\n\n------------------------------------------------------------------------\n\n## Data laten aansluiten\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1 2 3]{style=\"opacity:0.25\"} 4 [5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n<br>\n\nGebruik de `<-` operator om de nieuwe dataframe `courses_UG`te creëren\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"1\"}\ncourses_UG <- courses %>% \n  filter(level == \"UG\") %>% \n  mutate(year = str_c(str_sub(semester, 1, 4), \n                      \"-\",\n                      str_sub(semester, 5, 6)))\n```\n:::\n\n\n------------------------------------------------------------------------\n\n## Data laten aansluiten\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1 2 3]{style=\"opacity:0.25\"} 4 [5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n<br>\n\n`filter` op 'UG' alleen en `mutate` een nieuwe academisch `year`-variable\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2-5\"}\ncourses_UG <- courses %>% \n  filter(level == \"UG\") %>% \n  mutate(year = str_c(str_sub(semester, 1, 4), \n                      \"-\",\n                      str_sub(semester, 5, 6)))\n```\n:::\n\n\n------------------------------------------------------------------------\n\n## Data laten aansluiten\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1 2 3]{style=\"opacity:0.25\"} 4 [5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n<br>\n\n`group_by` op `year` en `faculty_id`; `summarize` enrollment\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"6-7\"}\ncourses_UG <- courses %>% \n  filter(level == \"UG\") %>% \n  mutate(year = str_c(str_sub(semester, 1, 4), \n                      \"-\",\n                      str_sub(semester, 5, 6))) %>% \n  group_by(year, faculty_id) %>% \n  summarize(enr = sum(enrollment))\n```\n:::\n\n\n. . .\n\n<br>\n\n::: {style=\"font-size: 0.45em\"}\n\n::: {.cell}\n::: {.cell-output-display}\n|year    | faculty_id| enr|\n|:-------|----------:|---:|\n|2018-19 |       1059|  35|\n|2018-19 |       1086|  14|\n|2018-19 |       1102|  37|\n|2018-19 |       1203|  25|\n:::\n:::\n\n:::\n\n------------------------------------------------------------------------\n\n## Data laten aansluiten\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1 2 3]{style=\"opacity:0.25\"} 4 [5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n<br>\n\nwat is de gemiddelde UGinschrijving per jaar, per faculteitsrang?\n\n::: columns\n::: {.column width=\"60%\"}\n::: {style=\"text-align: center\"}\n`faculty`\n:::\n\n::: {style=\"font-size: 0.45em\"}\n\n::: {.cell}\n::: {.cell-output-display}\n|year    |   id|rank                |dept1     |dept2       |\n|:-------|----:|:-------------------|:---------|:-----------|\n|2021-22 | 1005|Lecturer            |Chemistry |            |\n|2021-22 | 1022|Professor           |Physics   |Engineering |\n|2021-22 | 1059|Professor           |Physics   |            |\n|2021-22 | 1079|Lecturer            |Music     |            |\n|2021-22 | 1086|Assistant Professor |Music     |            |\n|2021-22 | 1095|Adjunct Instructor  |Sociology |            |\n:::\n:::\n\n:::\n:::\n\n::: {.column width=\"40%\"}\n::: {style=\"text-align: center\"}\n`courses_UG`\n:::\n\n::: {style=\"font-size: 0.45em\"}\n\n::: {.cell}\n::: {.cell-output-display}\n|year    | faculty_id| enr|\n|:-------|----------:|---:|\n|2021-22 |       1005|  50|\n|2021-22 |       1086|  17|\n|2021-22 |       1095|  48|\n|2021-22 |       1128|  32|\n|2021-22 |       1147|  32|\n|2021-22 |       1191|   7|\n:::\n:::\n\n:::\n:::\n:::\n\n. . .\n\n::: {.absolute top=\"42%\" left=\"4%\" width=\"150\"}\n::: blackbox\n:::\n:::\n\n::: {.absolute top=\"42%\" left=\"69%\" width=\"185\"}\n::: blackbox\n:::\n:::\n\n------------------------------------------------------------------------\n\n## Data laten aansluiten\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1 2 3]{style=\"opacity:0.25\"} 4 [5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n<br>\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfac_enr <- faculty %>% \n  left_join(courses_UG, by = c(\"id\" = \"faculty_id\",\n                               \"year\" = \"year\"))\n```\n:::\n\n\n::: {.absolute top=\"13%\" left=\"9%\"}\n[**1**]{style=\"color: #cc0000\"}\n:::\n\n::: {.absolute top=\"13%\" left=\"23%\"}\n[**2**]{style=\"color: #cc0000\"}\n:::\n\n::: {.absolute top=\"27.5%\" left=\"26%\"}\n[**3**]{style=\"color: #cc0000\"}\n:::\n\n1.  nieuwe dataframe\n2.  dataframe waar je data aan toevoegt\n3.  dataframe waar nieuwe data vanaf komen\n\n. . .\n\n::: {style=\"font-size: 0.45em\"}\n\n::: {.cell}\n::: {.cell-output-display}\n|year    |   id|rank                |dept1     |dept2       | enr|\n|:-------|----:|:-------------------|:---------|:-----------|---:|\n|2021-22 | 1005|Lecturer            |Chemistry |            |  50|\n|2021-22 | 1022|Professor           |Physics   |Engineering |    |\n|2021-22 | 1059|Professor           |Physics   |            |    |\n|2021-22 | 1079|Lecturer            |Music     |            |    |\n|2021-22 | 1086|Assistant Professor |Music     |            |  17|\n|2021-22 | 1095|Adjunct Instructor  |Sociology |            |  48|\n:::\n:::\n\n:::\n\n------------------------------------------------------------------------\n\n## Data laten aansluiten\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1 2 3]{style=\"opacity:0.25\"} 4 [5 6]{style=\"opacity:0.25\"}\n:::\n:::\n\n<br>\n\nwat is de gemiddelde UGinschrijving per jaar, per faculteitsrang?\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"4-5\"}\nfac_enr <- faculty %>% \n  left_join(courses_UG, by = c(\"id\" = \"faculty_id\",\n                               \"year\" = \"year\")) %>% \n  group_by(year, rank) %>% \n  summarize(avg_enr = mean(enr, na.rm = TRUE))\n```\n:::\n\n\n. . .\n\n<br>\n\n::: {style=\"font-size: 0.45em\"}\n\n::: {.cell}\n::: {.cell-output-display}\n|year    |rank                |  avg_enr|\n|:-------|:-------------------|--------:|\n|2021-22 |Adjunct Instructor  | 34.66667|\n|2021-22 |Assistant Professor | 23.60000|\n|2021-22 |Associate Professor | 17.25000|\n|2021-22 |Lecturer            | 31.83333|\n|2021-22 |Professor           | 32.16667|\n|2021-22 |Visiting Researcher |         |\n:::\n:::\n\n:::\n\n# Datavisualisatie\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1 2 3 4]{style=\"opacity:0.25\"} 5 [6]{style=\"opacity:0.25\"}\n:::\n:::\n\n## ggplot2\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1 2 3 4]{style=\"opacity:0.25\"} 5 [6]{style=\"opacity:0.25\"}\n:::\n:::\n\n<br>\n\n`ggplot2` is het datavisualizatiepakket dat geladen wordt met `tidyverse`\n\n<br>\n\nde [g]{style=\"color:#cc0000\"}rammar of\n[g]{style=\"color:#cc0000\"}raphics zorgt ervoor dat het geheel aan esthetische eisen voldoet\n\n. . .\n\n<br>\n\nmet het visueel hercoderen van gegevens (in bv. lengte, kleur, positie, grootte) kunnen veranderingen en vergelijkingen worden getoond\n\n------------------------------------------------------------------------\n\n## Staafdiagram\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1 2 3 4]{style=\"opacity:0.25\"} 5 [6]{style=\"opacity:0.25\"}\n:::\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"1-2|3|4\"}\nfaculty %>%\n  count(rank) %>%\n  ggplot(aes(x = rank, y = n)) +\n  geom_bar(stat = \"identity\")\n```\n:::\n\n\n. . .\n\nOm lijnen te combineren in een codechunk, gebruiken we `+` in plaats van `%>%`\n\n. . .\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](NEAIRNederlands_files/figure-revealjs/unnamed-chunk-67-1.png){fig-align='center' width=960}\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n## Staafdiagram\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1 2 3 4]{style=\"opacity:0.25\"} 5 [6]{style=\"opacity:0.25\"}\n:::\n:::\n\nkan makkelijk een mooiere grafiek maken\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"expand for full code\"}\nfaculty %>%\n  count(rank) %>%\n  ggplot(aes(x = reorder(rank, -n), y = n)) +\n  geom_bar(stat = \"identity\", fill = \"#cc0000\") +\n  scale_y_continuous(expand = expansion(mult = c(0, 0.1))) +\n  geom_text(aes(label = n), vjust = -0.5) +\n  labs(x = NULL, y = NULL,\n       title = \"Aantal faculteit per rang, 2018-2021\") +\n  theme_linedraw() +\n  theme(panel.grid.major.x = element_blank(),\n        axis.ticks = element_blank())\n```\n\n::: {.cell-output-display}\n![](NEAIRNederlands_files/figure-revealjs/unnamed-chunk-68-1.png){fig-align='center' width=960}\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n## Lijngrafiek\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1 2 3 4]{style=\"opacity:0.25\"} 5 [6]{style=\"opacity:0.25\"}\n:::\n:::\n\n<br>\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"1-2|3|4\"}\nfac_enr %>% \n  filter(!is.na(avg_enr)) %>% \n  ggplot(aes(x = year, y = avg_enr, group = rank, color = rank)) +\n  geom_line()\n```\n:::\n\n\n. . .\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](NEAIRNederlands_files/figure-revealjs/unnamed-chunk-70-1.png){fig-align='center' width=960}\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n## Lijn grafiek\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1 2 3 4]{style=\"opacity:0.25\"} 5 [6]{style=\"opacity:0.25\"}\n:::\n:::\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"expand for full code\"}\nfac_enr %>% \n  filter(!is.na(avg_enr)) %>% \n  ggplot(aes(x = year, y = avg_enr, group = rank, color = rank)) +\n  geom_line() +\n  geom_point() +\n  scale_color_brewer(type = \"qual\", palette = \"Dark2\") +\n  labs(x = NULL, y = \"Gemiddelde inschrijving\",\n       title = \"Gemiddelde UG per rang over tijd\") +\n  theme_linedraw() +\n  theme(panel.grid.major.x = element_blank(),\n        axis.ticks = element_blank(),\n        legend.title = element_blank(),\n        legend.background = element_rect(fill = NA),\n        legend.key = element_rect(fill = NA),\n        legend.position = c(0.85, 0.82))\n```\n\n::: {.cell-output-display}\n![](NEAIRNederlands_files/figure-revealjs/unnamed-chunk-71-1.png){fig-align='center' width=960}\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n## ggplot2 bronnen\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1 2 3 4]{style=\"opacity:0.25\"} 5 [6]{style=\"opacity:0.25\"}\n:::\n:::\n\nVan [R for Data\nScience](https://r4ds.had.co.nz/data-visualisation.html)\n\n<br>\n\n[Data Visualization: a practical\nintroduction](https://socviz.co/index.html#preface)\n\n<br>\n\ncreëren [custom\nthemes](https://themockup.blog/posts/2020-12-26-creating-and-using-custom-ggplot2-themes/)\n\n<br>\n\nhet [ggplot2 boek](https://ggplot2-book.org/)\n\n<br>\n\nde [R grafiek gallerie](https://r-graph-gallery.com/index.html)\n\n------------------------------------------------------------------------\n\n## Alles samengevat\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1 2 3 4]{style=\"opacity:0.25\"} 5 [6]{style=\"opacity:0.25\"}\n:::\n:::\n\n<br>\n\nmet alles wat we hebben gedaan, kan jouw `.R` file:\n\n::: incremental\n-   datafiles importeren\n-   [documenteer je alle dataopschoon- en voorbereidingsstappen en beslissingen]{style=\"color:#cc0000\"}\n-   produceer je een publiceerbare grafiek die jouw resultaten samenvat\n:::\n\n. . .\n\n::: {style=\"text-align: center\"}\n**en dat bestand zou het voor jou of iemand anders heel makkelijk maken om deze analyse over een tijdje te reproduceren met nieuwe gegevens**\n:::\n\n# Gevorderde onderwerpen\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1 2 3 4 5]{style=\"opacity:0.25\"} 6\n:::\n:::\n\n## Quarto en RMarkdown\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1 2 3 4 5]{style=\"opacity:0.25\"} 6\n:::\n:::\n\n<br>\n\nGebruikt RStudio om `.qmd` en `.rmd` documenten te maken waarin tekst, code en grafieken zijn gecombineerd\n\n. . .\n\n<br>\n\nverschillende soorten output: html, pdf, Word, presentaties etc\n\n. . .\n\n<br>\n\nheel handig voor [specifiek rapporteren]{style=\"color:#cc0000\"}:\nkan makkelijk een op R-gebaseerd PDFrapport maken en automatisch genereren voor, zeg, elk department\n\n------------------------------------------------------------------------\n\n## Interne pakketten\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1 2 3 4 5]{style=\"opacity:0.25\"} 6\n:::\n:::\n\n<br>\n\nje kunt je *eigen* pakket maken!\n\n. . .\n\n<br>\n\njouw pakket omvat dan bijvoorbeeld:\n\n-   algemene datasets die je over projecten heen kunt gebruiken\n-   vaststellen van het `ggplot2` thema\n-   algemene functies en berekeningen (en hun definities!)\n\n. . .\n\n<br>\n\nkan op een gedeelde schijf worden gezet om zo samenwerking te faciliteren \n\n------------------------------------------------------------------------\n\n## `Bronnen voor R Markdown en pakketten\n\n::: {.absolute top=\"0\" left=\"100%\"}\n::: sectionhead\n[1 2 3 4 5]{style=\"opacity:0.25\"} 6\n:::\n:::\n\n<br>\n\n**R Markdown**\n\nde officiële [R Markdown\nwebsite](https://rmarkdown.rstudio.com/lesson-1.html)\n\n[R Markdown: The Definitive\nGuide](https://bookdown.org/yihui/rmarkdown/)\n\n<br>\n\n**interne pakketten**\n\neen samenhangende [theoretische uitleg](https://emilyriederer.netlify.app/post/team-of-packages/)\n\neen [praatje van Meghan Hall](https://meghan.rbind.io/talk/boston-user/) eerder dit jaar over dit onderwerp\n\n# Meer over R leren\n\n## Bronnen\n\n[R for Data Science](https://r4ds.had.co.nz/): the ultimate guide\n\n<br>\n\n[R for Excel users](https://rstudio-conf-2020.github.io/r-for-excel/): a\nvery useful workshop\n\n<br>\n\n[STAT 545](https://stat545.com/): een onlineboek over reproduceerbare dataanalysis in R\n\n<br>\n\nde [RStudio Education](https://education.rstudio.com/) site\n\n<br>\n\nde [Learn `tidyverse`](https://www.tidyverse.org/learn/) site\n",
    "supporting": [
      "NEAIRNederlands_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\r\n<script>\r\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\r\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\r\n  // slide changes (different for each slide format).\r\n  (function () {\r\n    // dispatch for htmlwidgets\r\n    function fireSlideEnter() {\r\n      const event = window.document.createEvent(\"Event\");\r\n      event.initEvent(\"slideenter\", true, true);\r\n      window.document.dispatchEvent(event);\r\n    }\r\n\r\n    function fireSlideChanged(previousSlide, currentSlide) {\r\n      fireSlideEnter();\r\n\r\n      // dispatch for shiny\r\n      if (window.jQuery) {\r\n        if (previousSlide) {\r\n          window.jQuery(previousSlide).trigger(\"hidden\");\r\n        }\r\n        if (currentSlide) {\r\n          window.jQuery(currentSlide).trigger(\"shown\");\r\n        }\r\n      }\r\n    }\r\n\r\n    // hookup for slidy\r\n    if (window.w3c_slidy) {\r\n      window.w3c_slidy.add_observer(function (slide_num) {\r\n        // slide_num starts at position 1\r\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\r\n      });\r\n    }\r\n\r\n  })();\r\n</script>\r\n\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}